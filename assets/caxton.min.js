(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _multiSelectComponent=_interopRequireDefault(require("./es6/multiSelectComponent.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function initCaxton(e,t,n,i,o){window.caxtonWPEditor=wp.blockEditor?wp.blockEditor:wp.editor;var r=caxtonWPEditor,a=i.__,l=t.registerBlockType,s=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c=function(t,i,o){t?t.__html&&(t=t.__html):t="",i||(i={}),o||(o="div");var r=e.extend({dangerouslySetInnerHTML:{__html:t}},i);return n(o,r)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=caxtonFAIconsSvg[e];if(n||(n=caxtonFAIconsSvg[e+"-solid"])||(n=caxtonFAIconsSvg[e+"-brand"])||(n=caxtonFAIconsSvg[e+"-regular"]),t){var i="object"===_typeof(t)?t:{};return c(n,i)}return n},p=function(){function t(n){_classCallCheck(this,t);var i=this;this.setProps(),n.id||console.error("Parameter `id` is required for CaxtonBlock"),this.block=e.extend({title:n.id,icon:"star-filled",category:"layout",fields:{},attributes:{}},n),i.tpl=n.tpl,n.toolbars?n.fields=jQuery.extend(n.fields,n.toolbars):n.toolbars={},n.resizable&&(n.resizable.height&&(this.block.attributes[n.resizable.height]={type:"string"}),n.resizable.width&&(this.block.attributes[n.resizable.width]={type:"string"})),i.fields=i.processFields(n.fields),i.sections=n.sections?n.sections:{},i.sectionsFields=i.processSections(i.fields),i.toolbars=i.processFields(n.toolbars),i.registerBlock()}return _createClass(t,[{key:"setProps",value:function(){this.keySuffix=0}}]),_createClass(t,[{key:"preprocessField_overlay",value:function(e,t){var n=s({color:"",color2:"",gradient:"linear-gradient( ",opacity:"1"},t[e].defaults||{});t[e]=Object.assign({section:"Overlay",tpl:'<div class="absolute absolute--fill" style="background-color:{{Background color}};{{Gradient type}}{{Background colors opacity}}"></div>'},t[e]);var i=t[e].section;Object.assign(t,{"Background color":{type:"color",section:i,default:n.color},"Gradient color":{type:"color",section:i,tpl:", %s",default:n.color2},"Gradient type":{type:"select",options:[{value:"linear-gradient( ",label:"Linear vertical"},{value:"linear-gradient( 90deg, ",label:"Linear horizontal"},{value:"linear-gradient( 45deg, ",label:"Linear 45 deg"},{value:"linear-gradient( -45deg, ",label:"Linear 45 deg anticlockwise"},{value:"radial-gradient( ",label:"Radial gradient"}],section:i,tpl:"background-image:%s{{Background color}}{{Gradient color}});",default:n.gradient},"Background colors opacity":{type:"range",min:0,max:1,step:.05,help:"Reduce opacity to have transparent colors over image",section:i,tpl:"opacity:%s;",default:n.opacity}})}},{key:"preprocessField_background",value:function(e,t){var n=s({image:"",image_position:"",parallax:""},t[e].defaults||{}),i="background-color:{{Background color}};{{Gradient type}}",o='<div class="absolute absolute--fill cover bg-center" style="'+i+'{{Background image}}{{Background image position}}{{Background parallax}}"></div><div class="absolute absolute--fill" style="'+i+'{{Background colors opacity}}"></div>';t[e]=Object.assign({section:"Background",tpl:o},t[e]);var r=t[e].section;Object.assign(t,{"Background image":{type:"image",section:r,tpl:"background-image:url(%s);",default:n.image},"Background image position":{type:"position",section:r,tpl:"background-position:%s;",default:n.image_position},"Background parallax":{type:"toggle",value:"background-attachment:fixed;",section:r,default:n.parallax}}),this.preprocessField_overlay(e,t),t[e].tpl=o}},{key:"preprocessFields",value:function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].type&&"function"==typeof this["preprocessField_"+e[t].type]&&this["preprocessField_"+e[t].type](t,e);return e}},{key:"processFields",value:function(e){var t=[];for(var n in e=this.preprocessFields(e))if(e.hasOwnProperty(n)){var i=e[n],o={};"object"===_typeof(i)?o=i:o.type=i,o.id=n,o.label=o.label?o.label:n,"checkbox"!==o.type&&"toggle"!==o.type||(o.value=o.value||"1"),!o.default&&isNaN(o.default)?o.default="":o.default=""+o.default,o.attr?this.block.attributes[n]=o.attr:this.block.attributes[n]={type:this.fieldAttrType(o)},t.push(o)}return t}},{key:"fieldAttrType",value:function(e){var t=e.type,n={number:"number",range:"number"};return n[t]?n[t]:"string"}},{key:"processSections",value:function(e){for(var t={},n=0;n<e.length;n++){var i=e[n].section;i&&(t[i]||(t[i]=[]),t[i].push(e[n]))}return t}},{key:"fieldProps",value:function(t,n){var i=t.id,o=this,r=e.extend({},t);return r.key="".concat(r.type,"-").concat(n),r.onChange||(r.value=o.attrs[i],r.onChange=function(e,n){var r={};r[i]=e,"checkbox"!==t.type&&"toggle"!==t.type||(r[i]=e?t.value:""),o.focussedProps.setAttributes(r),"function"==typeof t.onChange&&t.onChange(e,o,n)},delete r.id,delete r.type),r}},{key:"editableFieldEl",value:function(e,t){return null}},{key:"overlayFieldEl",value:function(e,t){return null}},{key:"backgroundFieldEl",value:function(e,t){return null}},{key:"imageFieldEl",value:function(e,t){var i=this.fieldProps(e,t);i.className||(i.className="");var l=a("Select image"),s=null;return i.value&&(i.value.indexOf("featured_image")>-1&&i.onChange(caxton.content_vars[i.value]),l=[n("img",{src:i.value,key:"image"}),a("Click the image to edit or update")],s=n("a",{className:"caxton-remove-image",href:"#",onClick:function(){i.onChange("",{})}},n("i",{className:"dashicons dashicons-no"}),"Remove")),i.className+=" caxton-image-picker",n(o.BaseControl,i,n(r.MediaUpload,{key:"imagePicker",onSelect:function(e){i.onChange(e.url,e)},type:"image",value:i.value,label:i.label,render:function(e){var t=e.open;return n("span",{className:"v-mid dib"},s,n(o.Button,{className:i.value?"image-button":"ml3 button button-large ",onClick:t},l))}}))}},{key:"colorFieldEl",value:function(e,t){var i=[],o=this.fieldProps(e,t);return o.title=o.label,void 0===o.initialOpen&&(o.initialOpen=!o.value),e.help&&i.push(e.help),o.colorSettings=[{label:o.label,value:o.value,onChange:o.onChange}],n(caxtonWPEditor.PanelColorSettings,o,i)}},{key:"checkboxFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.checked=!!this.attrs[e.id],n(o.CheckboxControl,i)}},{key:"radioFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.selected=i.value,n(o.RadioControl,i)}},{key:"rangeFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.value=parseFloat(i.value),n(o.RangeControl,i)}},{key:"selectFieldEl",value:function(e,t){return n(o.SelectControl,this.fieldProps(e,t))}},{key:"orderedSelectFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return n(o.BaseControl,i,n(_multiSelectComponent.default,i))}},{key:"fontFieldEl",value:function(t,i){t.tpl||(t.tpl="font-family: %s;");var r=this.fieldProps(t,i),a=r.onChange;return r.onChange=function(t){if(!t.includes(",")){var n=e("<link rel='stylesheet' class='caxton-google-font'>");n.attr("href","https://fonts.googleapis.com/css?family=".concat(t)),e("body").append(n)}a(t)},r.options=caxton.fonts,n(o.SelectControl,r)}},{key:"numberFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.type="number",n(o.TextControl,i)}},{key:"textFieldEl",value:function(e,t){return n(o.TextControl,this.fieldProps(e,t))}},{key:"customFieldEl",value:function(e,t){return e.render(this.fieldProps(e),this)}},{key:"textareaFieldEl",value:function(e,t){return n(o.TextareaControl,this.fieldProps(e,t))}},{key:"dateTimeFieldEl",value:function(e,t){return datetimeFieldEl(e,t)}},{key:"datetimeFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.currentDate=i.value,n(o.PanelBody,{title:i.label},n(o.DateTimePicker,i))}},{key:"toggleFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.checked=!!this.attrs[e.id],n(o.ToggleControl,i)}},{key:"iconFieldEl",value:function(t,i){var r=this.fieldProps(t,i),l=[];r.title=r.label,r.className="caxton-icon-picker-panel";for(var s=0;s<100;s++){var c=caxtonFAIconsData[s];l.push(u(c.n,{key:s,className:"icon-choice","data-icon":c.n},"i"))}return l.push(n("p",{key:"helptext"},"Search icons for more from all Font Awesome icons")),n(o.PanelBody,r,n("div",{className:"caxton-icon-picker",onClick:function(t){var n=t.target,i=e(n).closest(".icon-choice");i.length&&r.onChange(i.html())}},n("input",{type:"text",placeholder:a("Search icons","caxton"),onKeyUp:function(t){var n,i=t.target,o=i.value,r=0;o=o.toLowerCase(),(n=e(i).siblings(".caxton-matching-icons")).html("");for(var a=0;r<50&&a<caxtonFAIconsData.length;a++){var l=caxtonFAIconsData[a];l.n.includes(o)?(r++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice">')+u(l.n,!1)+"</i>")):r<34&&l.s.includes(o)&&(r++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice order-2">')+u(l.n,!1)+"</i>"))}}}),n("span",{className:"dashicons dashicons-search",title:a("Search","caxton")}),n("span",{className:"dashicons dashicons-no",title:a("Remove icon","caxton"),style:{cursor:"pointer",display:r.value?"block":"none"},onClick:function(){r.onChange("")}}),n("div",{className:"caxton-matching-icons",onClick:function(e){var t=e.target;"I"===t.tagName&&r.onChange(" ".concat(t.className.replace(" o-70","")))}},l)))}},{key:"positionFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.selected=i.value,i.options=[{value:"center top",label:"Top"},{value:"",label:"Center"},{value:"center bottom",label:"Bottom"}],n(o.RadioControl,i)}},{key:"AlignmentToolbarInit",value:function(t,i){var r=this.fieldProps(t,i),l=e.extend({left:"tl",right:"tr",center:"tc",justify:"tj"},r.values||{});return r.controls=[{icon:"editor-alignleft",title:a("Align left"),isActive:r.value===l.left,onClick:function(){r.onChange(l.left)}},{icon:"editor-aligncenter",title:a("Align center"),isActive:r.value===l.center,onClick:function(){r.onChange(l.center)}},{icon:"editor-alignright",title:a("Align right"),isActive:r.value===l.right,onClick:function(){r.onChange(l.right)}},{icon:"editor-justify",title:a("Align justify"),isActive:r.value===l.justify,onClick:function(){r.onChange(l.justify)}}],r.wideControlsEnabled=!0,n(o.Toolbar,r)}},{key:"BlockWidthToolbarInit",value:function(e,t){var i=this.fieldProps(e,t);return i.controls=[{icon:"align-center",title:a("Default"),isActive:!i.value,onClick:function(){i.onChange("")}},{icon:"align-wide",title:a("Wide width"),isActive:" vw-100-bg"===i.value,onClick:function(){i.onChange(" vw-100-bg")}},{icon:"align-full-width",title:a("Full width"),isActive:" vw-100"===i.value,onClick:function(){i.onChange(" vw-100")}}],i.wideControlsEnabled=!0,n(o.Toolbar,i)}},{key:"BlockAlignToolbarInit",value:function(e,t){var i=this.fieldProps(e,t);return i.controls=[{icon:"align-left",title:a("Align left"),isActive:" fl"===i.value,onClick:function(){i.onChange(" fl")}},{icon:"align-center",title:a("Align center"),isActive:!i.value,onClick:function(){i.onChange("")}},{icon:"align-right",title:a("Align right"),isActive:" fr"===i.value,onClick:function(){i.onChange(" fr")}}],i.wideControlsEnabled=!0,n(o.Toolbar,i)}},{key:"renderPanel",value:function(t){this.fields;var i,r={};return this.sections[t]&&(r=this.sections[t]),(r=e.extend(r,{title:t,className:"",key:"CaxtonPanel".concat(t),initialOpen:!1})).className+="caxton-section caxton-section-".concat(t.toLowerCase().replace(/[^0-z]/g,"-")),i=this.renderFields(this.sectionsFields[t],t),n(o.PanelBody,r,i)}},{key:"fieldEl",value:function(e,t,n){return void 0===n&&(n=this.keySuffix++),t||(t=e.type+"FieldEl"),this[t](e,n)}},{key:"renderFields",value:function(e,t,n){var i=[],o=[];n||(n="FieldEl");for(var r=0;r<e.length;r++){var a,l=e[r];n.includes("Toolbar")&&(l.type=l.type.replace("Toolbar","")),"function"==typeof l.render&&(l.type="custom"),"function"==typeof this[a=l.type+n]?l.hide||(t?l.section==t&&i.push(this.fieldEl(l,a,r)):l.section?o.includes(l.section)||(o.push(l.section),i.push(this.renderPanel(l.section))):i.push(this.fieldEl(l,a,r))):l.type.includes("Toolbar")||console.error("".concat(n.replace("Init","")," ").concat(l.id," of type ").concat(l.type," and callback ").concat(a," not supported."))}return i}},{key:"resizableElement",value:function(e,t,i){var r,a=(i=i||this.props).attributes,l=i.setAttributes,s=i.isSelected,c=e.height,u=e.width,p=_slicedToArray(wp.element.useState(!1),2),d=p[0],f=p[1];if(c||u){r=(e=jQuery.extend({enable:[],onResizeStop:function(){},onResize:function(){},onResizeStart:function(){}},e)).enable.toString().toLowerCase();var h={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},v={key:"caxton-resizable",className:{"caxton-resizable":!0,"is-selected":s,"is-resizing":d},size:{},onResizeStop:function(t,n,i,o){e.onResizeStop(t,n,i,o),f(!1)},onResize:function(t,n,i,o){e.onResize(t,n,i,o);var r={};c&&(r[c]=e.keepUnits?i.style.height:i.clientHeight+""),u&&(r[u]=e.keepUnits?i.style.width:i.clientWidth+""),l(r)},onResizeStart:function(t,n,i,o){e.onResizeStart(t,n,i,o),f(!0)}};return e.size&&(v.size=e.size),c&&(a[c]&&(v.size.height=a[c]),v.minHeight=e.minHeight||50,r.indexOf("top")>-1||r.indexOf("bottom")>-1||e.enable.push("bottom")),u&&(a[u]&&(v.size.width=a[u]),v.minWidth=e.minWidth||50,r.indexOf("left")>-1||r.indexOf("right")>-1||e.enable.push("right")),e.enable.forEach(function(e){h.hasOwnProperty(e)&&(h[e]=!0)}),v.enable=h,v.showHandle=s,n(o.ResizableBox,v,n("div",{className:"caxton-resizable-contents"},t))}return t}},{key:"toolbarElements",value:function(){var e=this.renderFields(this.toolbars,!1,"ToolbarInit");if(e.length)return n(r.BlockControls,{key:"toolbars"},e)}},{key:"inspectorFields",value:function(){var e=this.fields,t=[];if((t=t.concat(this.renderFields(e)))&&t.length)return n(r.InspectorControls,{key:"inspector"},t)}},{key:"populateField_editable",value:function(e,t,n){var i=a("Click to Edit");return t.tag||(t.tag="span"),n?(e===t.default&&(e="<".concat(t.tag,' class="default">').concat(e,"</").concat(t.tag,">")),e="<".concat(t.tag,' contentEditable="true" title="').concat(i,'" data-caxtonEditableProp="').concat(t.id,'">').concat(e,"</").concat(t.tag,">")):e&&(e="<".concat(t.tag,">").concat(e,"</").concat(t.tag,">")),e}},{key:"populateField_overlay",value:function(e,t){return"1"}},{key:"populateField_background",value:function(e,t){return"1"}},{key:"populateFields",value:function(e,t){if(!e)return"";for(var n in this.fields)if(this.fields.hasOwnProperty(n)){var i,o=this.fields[n],r=i=this.attrs[o.id];"function"==typeof this["populateField_"+o.type]&&(r=this["populateField_"+o.type](r,o,t)),(r||"number"==typeof r)&&o.tpl&&(r=this.callbackValue(o.tpl,r).replace(/%s/g,r)),e=(e=e.split("{{_".concat(o.id,"}}")).join(i)).split("{{".concat(o.id,"}}")).join(r)}return e}},{key:"parseTpl",value:function(e,t){return e=this.populateFields(e,t),this.populateFields(e,t)}},{key:"outputHTML",value:function(e,t){return{__html:this.parseTpl(e,t)}}},{key:"callbackValue",value:function(e,t){return"function"==typeof e?e(t,this):e}},{key:"editableTpl",value:function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this;return i=this.callbackValue(i,t),o=s({key:"block",dangerouslySetInnerHTML:r.outputHTML(i,"edit"),onClick:function(e){e.preventDefault()},onKeyDown:function(t){var n=t.target,i=e(n).find(".default");i.length&&i.remove()},onBlur:function(t){var n=t.target,i=e(n),o={};o[i.attr("data-caxtonEditableProp")]=i.html(),r.focussedProps.setAttributes(o)}},o),n("div",o)}},{key:"edit",value:function(e){if(this.block)return"function"==typeof this.block.edit?this.block.edit(e,this):this.editableTpl(e,this.tpl)}},{key:"save",value:function(e){this.block.id;if(this.block)return"function"==typeof this.block.save?this.block.save(e,this):n("div",{dangerouslySetInnerHTML:this.outputHTML(this.callbackValue(this.tpl,e))})}},{key:"saveBlockProperties",value:function(e){this.props=e,this.saveBlockAttributes(this.props.attributes)}},{key:"saveBlockAttributes",value:function(e){for(var t in this.attrs=e,this.fields)if(this.fields.hasOwnProperty(t)){var n=this.fields[t];!this.attrs[n.id]&&isNaN(this.attrs[n.id])?this.attrs[n.id]=n.default:"image"===n.type&&this.attrs[n.id].indexOf("featured_image")>-1?this.attrs[n.id]=caxton.content_vars[this.attrs[n.id]]:this.attrs[n.id]=this.attrs[n.id]}}},{key:"registerBlock",value:function(){var t,i=this,o=this.block,r=e.extend({},o);if(o.icon.includes("<svg")){var a=jQuery(o.icon),u={};e.each(a[0].attributes,function(){this.specified&&(t=this.name.replace(/[-:]([a-z])/g,function(e){return e[1].toUpperCase()}),u[t]=this.value)}),u.height=20,u.width=20,o.icon=c(a.html(),u,"svg")}delete r.fields,delete r.tpl,delete r.id,r.icon=o.icon;var p=function(e){var t=[];if(i.saveBlockProperties(e),"function"==typeof i.block.beforeEdit){var o=i.block.beforeEdit(e,i);o&&t.push(o)}e.isSelected&&(i.focussedProps=e,t.push(i.inspectorFields()),t.push(i.toolbarElements()));var r=i.edit(e);if(i.block.resizable&&(r=i.resizableElement(i.block.resizable,r)),t.push(r),"function"==typeof i.block.afterEdit){var a=i.block.afterEdit(e,i);a&&t.push(a)}return n(wp.element.Fragment,{key:"block-content"},t)};if(r.edit=p,r.getEditWrapperProps=function(e){i.saveBlockAttributes(e);var t={},n=e.Layout,r=e.BlockAlignment;if(r=r||e["Block Alignment"],n&&(t["caxton-layout"]=n),r){t["data-align"]={" fl":"left"," rl":"right"}[r]}return"function"==typeof o.registerBlockProps&&(t=jQuery.extend(o.registerBlockProps(e,i),t)),"function"==typeof i.block.wrapperProps&&(t=i.block.wrapperProps(t,e,i)),t},r.save=function(e){return i.saveBlockProperties(e),i.save(e)},void 0!==o.apiUrl){"function"!=typeof o.apiUrl&&(o.apiUrl=function(){return{apiData:o.apiUrl}}),"function"==typeof o.apiCallback&&(i.block.edit=o.apiCallback);r.edit=function(e){var t=_slicedToArray(wp.element.useState("{}"),2),n=t[0],i=t[1],r=JSON.parse(n),a=o.apiUrl(e),l=function(e){a.hasOwnProperty(e)&&(r[e]&&a[e]===r[e].path||(r[e]={},wp.apiFetch({path:a[e]}).then(function(t){r[e].data!==t&&(r[e].data=t,r[e].path=a[e],i(JSON.stringify(r)))})))};for(var c in a)l(c);return p(s(_objectSpread({},e),r))},"function"!=typeof this.block.save&&(r.save=function(){return null})}-1===o.id.indexOf("/")&&(o.id="caxton/".concat(o.id)),l(o.id,r)}}]),t}();p.prototype.orderedselectFieldEl=p.prototype.orderedSelectFieldEl,window.CaxtonBlock=function(e){return new p(e)},window.CaxtonContentBlock=function(e){for(var t=Caxton.copyObj({tag:"div",props:{},tplProps:{},innerProps:{classname:"caxton-content-wrapper"},prefix:"",prefixProps:{},suffix:"",suffixProps:{},template:[]},e),i=["tag","props","innerProps","template","prefix","prefixProps","tplProps","suffix","suffixProps"],o=0;o<i.length;o++){delete e[i[o]]}return e.edit=function(e,i){var o=function(t){return i.callbackValue(t,e)};return n(t.tag,o(t.props),t.prefix&&i.editableTpl(e,o(t.prefix),o(t.prefixProps)),t.tpl&&i.editableTpl(e,o(t.tpl),o(t.tplProps)),n("div",o(t.innerProps),n(r.InnerBlocks,{template:t.template})),t.suffix&&i.editableTpl(e,o(t.suffix),o(t.suffixProps)))},e.save=function(e,i){var o=function(t){return i.callbackValue(t,e)};return n(t.tag,i.callbackValue(t.props),t.prefix&&c(i.outputHTML(o(t.prefix)),o(t.prefixProps)),t.tpl&&c(i.outputHTML(o(t.tpl)),o(t.tplProps)),n("div",o(t.innerProps),n(r.InnerBlocks.Content)),t.suffix&&c(i.outputHTML(o(t.suffix)),o(t.suffixProps)))},new p(e)},window.Caxton={el:n,el2html:function(e){var t="";if(e){e.length||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];switch(_typeof(i)){case"object":t+=wp.element.renderToString(i);break;default:t+=i}}}return t},html2el:c,copyObj:s,styleObject:function(e){for(var t={},n=e.split(";"),i=0;i<n.length;i++){var o=n[i].split(/:(.+)/);t[o[0]]=o[1]}return t},tplProc:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));return e},iconSvg:u}}initCaxton(jQuery,wp.blocks,wp.element.createElement,window.wp.i18n,wp.components),jQuery(function(e){setTimeout(function(){if("string"==typeof ajaxurl){for(var t,n,i=wp.data.select("core/blocks").getBlockTypes(),o={},r=0;r<i.length;r++)n="object"===_typeof(n=(t=i[r]).icon.src)?Caxton.el2html(n):'<span class="dashicons dashicons-'.concat(n,'"></span>'),o[t.name]={title:t.title,icon:n,category:t.category};e.post(ajaxurl,{action:"caxton_save_blocks",blocks:JSON.stringify(o)})}},2500)}),setTimeout(function(){CaxtonUtils.asset("icons-data.js"),CaxtonUtils.asset("icons-svg.js")},2500);

},{"./es6/multiSelectComponent.es6":2}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=MultiSelectComponent;var _reactSortableList=_interopRequireDefault(require("./react-sortable-list.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,o=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function optionEl(e){var t=window.Caxton.el;return t("div",{className:"caxton-orderedselect-option","data-val":e.value,key:"option-".concat(e.value)},e.image?t("img",{src:e.image}):null,e.label)}function MultiSelectComponent(e){var t=window.Caxton.el;$=window.jQuery;for(var r,a,o=_slicedToArray(wp.element.useState(""),2),n=o[0],l=o[1],i=e.delimiter?e.delimiter:",",s=void 0===e.multiple||e.multiple,c={},u={},d=[],p=e.value?e.value.split(i):[],y=0;y<e.options.length;y++)if(a=optionEl(r=e.options[y]),"number"==typeof r.value&&(r.value=r.value.toString()),-1!==p.indexOf(r.value))c[r.value]=r,u[r.value]=a;else{if(d.length>99)continue;(!n||r.label.toLowerCase().indexOf(n.toLowerCase())>-1)&&d.push(a)}return d.length<2&&d.push(t("span",{className:"caxton-placeholder o70",key:"placeholder"},"No items found".concat(n&&" for "+n,"..."))),d.splice(0,0,t("input",{className:"caxton-orderedselect-search",placeholder:"Search...",value:n,onChange:function(e){var t=e.target;return l(t.value)},key:"search"})),t("div",{className:"caxton-orderedselect-wrap",key:"orderedselect-wrap"},t("div",{className:"caxton-orderedselect-selected",key:"selected-options",onClick:function(t){var r,a=t.target,o=$(a);o.hasClass("caxton-orderedselect-option")?(r=o.attr("data-val"),p.splice(p.indexOf(r),1),e.onChange(p.join(i))):o.closest(".caxton-orderedselect-wrap").toggleClass("caxton-orderedselect-open")}},t(_reactSortableList.default,{data:p,renderItem:function(e){return u[e]},onChange:function(t){e.onChange(t.join(i))}}),!p.length&&t("span",{className:"caxton-placeholder o70",key:"placeholder"},"Please choose..."),t("i",{className:"dashicons dashicons-arrow-down",key:"down-arrow-icon"})),t("div",{className:"caxton-orderedselect-available",key:"available-options",onClick:function(t){var r,a=t.target,o=$(a);o.hasClass("caxton-orderedselect-option")&&(r=o.attr("data-val"),s?p.push(r):p=[r],e.onChange(p.join(i)))}},d))}

},{"./react-sortable-list.es6":3}],3:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var SortableItems=function(t){_inherits(r,wp.element.Component);var e=_createSuper(r);function r(t){var o;_classCallCheck(this,r),o=e.call(this,t);var n=document.createElement("div");return n.className="placeholder",o.state={data:_toConsumableArray(t.data),placeholder:n},o.dragEnd=o.dragEnd.bind(_assertThisInitialized(o)),o.dragStart=o.dragStart.bind(_assertThisInitialized(o)),o.dragOver=o.dragOver.bind(_assertThisInitialized(o)),o}return _createClass(r,[{key:"componentWillMount",value:function(){this.setState({data:_toConsumableArray(this.props.data)})}},{key:"componentDidUpdate",value:function(t){this.props.data.length===this.state.data.length&&JSON.stringify(this.props.data)===JSON.stringify(t.data)||this.setState({data:_toConsumableArray(this.props.data)})}},{key:"sortData",value:function(t,e){var r=_toConsumableArray(this.state.data);r.splice(e,0,r.splice(t,1)[0]),(this.props.onChange||function(t){return null})(r),this.setState({data:r})}},{key:"dragStart",value:function(t){this.dragged=t.currentTarget,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",t.currentTarget),this.state.placeholder.style.height=this.dragged.offsetHeight+"px"}},{key:"dragEnd",value:function(t){this.dragged.style.display="block",this.dragged.parentNode.removeChild(this.state.placeholder);var e=Number(this.dragged.dataset.ind),r=Number(this.over.dataset.ind);e<r&&r--,"after"==this.nodePlacement&&r++,this.sortData(e,r)}},{key:"dragOver",value:function(t){if(t.preventDefault(),this.dragged.style.display="none","placeholder"!=t.target.className){for(this.over=t.target;!this.over.classList.contains("sortable-items--item");){if(this.over.classList.contains("sortable-items--wrap"))return;this.over=this.over.parentNode}var e=this.dragged.offsetTop-this.over.offsetTop,r=this.over.offsetHeight/2,o=this.over.parentNode;e>r?(this.nodePlacement="after",o.insertBefore(this.state.placeholder,this.over.nextElementSibling)):e<r&&(this.nodePlacement="before",o.insertBefore(this.state.placeholder,this.over))}}},{key:"renderItem",value:function(t,e){var r=window.Caxton.el,o=this.props.renderItem;o||(o=function(t){return t});var n=_objectSpread({key:e,draggable:"true",onDragEnd:this.dragEnd,onDragStart:this.dragStart,className:"","data-ind":e},this.props.itemProps||{});return n.className+=" sortable-items--item",r("div",n,o(t))}},{key:"render",value:function(){var t=this,e=window.Caxton.el,r=this.state.data.map(function(e,r){return t.renderItem(e,r)}),o=_objectSpread({onDragOver:this.dragOver,className:""},this.props.wrapProps||{});return o.className+=" sortable-items--wrap",e("div",o,r)}}]),r}();exports.default=SortableItems;

},{}]},{},[1]);
