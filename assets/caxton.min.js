(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _multiSelectComponent=_interopRequireDefault(require("./es6/multiSelectComponent.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(i=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function initCaxton(e,t,n,i,o){window.caxtonWPEditor=wp.blockEditor?wp.blockEditor:wp.editor;var a=caxtonWPEditor,r=i.__,l=t.registerBlockType,s=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c=function(t,i,o){t?t.__html&&(t=t.__html):t="",i||(i={}),o||(o="div");var a=e.extend({dangerouslySetInnerHTML:{__html:t}},i);return n(o,a)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=caxtonFAIconsSvg[e];if(n||(n=caxtonFAIconsSvg[e+"-solid"])||(n=caxtonFAIconsSvg[e+"-brand"])||(n=caxtonFAIconsSvg[e+"-regular"]),t){var i="object"===_typeof(t)?t:{};return c(n,i)}return n},p=function(){function t(n){_classCallCheck(this,t);var i=this;this.setProps(),n.id||console.error("Parameter `id` is required for CaxtonBlock"),this.block=e.extend({title:n.id,icon:"star-filled",category:"layout",fields:{},attributes:{}},n),i.tpl=n.tpl,n.toolbars?n.fields=jQuery.extend(n.fields,n.toolbars):n.toolbars={},n.resizable&&(n.resizable.height&&(this.block.attributes[n.resizable.height]={type:"string"}),n.resizable.width&&(this.block.attributes[n.resizable.width]={type:"string"})),i.fields=i.processFields(n.fields),i.sections=n.sections?n.sections:{},i.sectionsFields=i.processSections(i.fields),i.toolbars=i.processFields(n.toolbars),i.registerBlock()}return _createClass(t,[{key:"setProps",value:function(){this.keySuffix=0}}]),_createClass(t,[{key:"preprocessField_overlay",value:function(e,t){var n=s({color:"",color2:"",gradient:"linear-gradient( ",opacity:"1"},t[e].defaults||{});t[e]=Object.assign({section:"Overlay",tpl:'<div class="absolute absolute--fill" style="background-color:{{Background color}};{{Gradient type}}{{Background colors opacity}}"></div>'},t[e]);var i=t[e].section;Object.assign(t,{"Background color":{type:"color",section:i,default:n.color},"Gradient color":{type:"color",section:i,tpl:", %s",default:n.color2},"Gradient type":{type:"select",options:[{value:"linear-gradient( ",label:"Linear vertical"},{value:"linear-gradient( 90deg, ",label:"Linear horizontal"},{value:"linear-gradient( 45deg, ",label:"Linear 45 deg"},{value:"linear-gradient( -45deg, ",label:"Linear 45 deg anticlockwise"},{value:"radial-gradient( ",label:"Radial gradient"}],section:i,tpl:"background-image:%s{{Background color}}{{Gradient color}});",default:n.gradient},"Background colors opacity":{type:"range",min:0,max:1,step:.05,help:"Reduce opacity to have transparent colors over image",section:i,tpl:"opacity:%s;",default:n.opacity}})}},{key:"preprocessField_background",value:function(e,t){var n=s({image:"",image_position:"",parallax:""},t[e].defaults||{}),i="background-color:{{Background color}};{{Gradient type}}",o='<div class="absolute absolute--fill cover bg-center" style="'+i+'{{Background image}}{{Background image position}}{{Background parallax}}"></div><div class="absolute absolute--fill" style="'+i+'{{Background colors opacity}}"></div>';t[e]=Object.assign({section:"Background",tpl:o},t[e]);var a=t[e].section;Object.assign(t,{"Background image":{type:"image",section:a,tpl:"background-image:url(%s);",default:n.image},"Background image position":{type:"position",section:a,tpl:"background-position:%s;",default:n.image_position},"Background parallax":{type:"toggle",value:"background-attachment:fixed;",section:a,default:n.parallax}}),this.preprocessField_overlay(e,t),t[e].tpl=o}},{key:"preprocessFields",value:function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].type&&"function"==typeof this["preprocessField_"+e[t].type]&&this["preprocessField_"+e[t].type](t,e);return e}},{key:"processFields",value:function(e){var t=[];for(var n in e=this.preprocessFields(e))if(e.hasOwnProperty(n)){var i=e[n],o={};"object"===_typeof(i)?o=i:o.type=i,o.id=n,o.label=o.label?o.label:n,"checkbox"!==o.type&&"toggle"!==o.type||(o.value=o.value||"1"),!o.default&&isNaN(o.default)?o.default="":o.default=""+o.default,o.attr?this.block.attributes[n]=o.attr:this.block.attributes[n]={type:this.fieldAttrType(o)},t.push(o)}return t}},{key:"fieldAttrType",value:function(e){var t=e.type,n={number:"number",range:"number"};return n[t]?n[t]:"string"}},{key:"processSections",value:function(e){for(var t={},n=0;n<e.length;n++){var i=e[n].section;i&&(t[i]||(t[i]=[]),t[i].push(e[n]))}return t}},{key:"fieldProps",value:function(t,n){var i=t.id,o=this,a=e.extend({},t);return a.key="".concat(a.type,"-").concat(n),a.onChange||(a.value=o.attrs[i],a.onChange=function(e,n){var a={};a[i]=e,"checkbox"!==t.type&&"toggle"!==t.type||(a[i]=e?t.value:""),o.focussedProps.setAttributes(a),"function"==typeof t.onChange&&t.onChange(e,o,n)},delete a.id,delete a.type),a}},{key:"editableFieldEl",value:function(e,t){return null}},{key:"overlayFieldEl",value:function(e,t){return null}},{key:"backgroundFieldEl",value:function(e,t){return null}},{key:"imageFieldEl",value:function(e,t){var i=this.fieldProps(e,t);i.className||(i.className="");var l=r("Select image"),s=null;return i.value&&(i.value.indexOf("featured_image")>-1&&i.onChange(caxton.content_vars[i.value]),l=[n("img",{src:i.value,key:"image"}),r("Click the image to edit or update")],s=n("a",{className:"caxton-remove-image",href:"#",onClick:function(){i.onChange("",{})}},n("i",{className:"dashicons dashicons-no"}),"Remove")),i.className+=" caxton-image-picker",n(o.BaseControl,i,n(a.MediaUpload,{key:"imagePicker",onSelect:function(e){i.onChange(e.url,e)},type:"image",value:i.value,label:i.label,render:function(e){var t=e.open;return n("span",{className:"v-mid dib"},s,n(o.Button,{className:i.value?"image-button":"ml3 button button-large ",onClick:t},l))}}))}},{key:"colorFieldEl",value:function(e,t){var i=[],o=this.fieldProps(e,t);return o.title=o.label,void 0===o.initialOpen&&(o.initialOpen=!o.value),e.help&&i.push(e.help),o.colorSettings=[{label:o.label,value:o.value,onChange:o.onChange}],n(caxtonWPEditor.PanelColorSettings,o,i)}},{key:"checkboxFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.checked=!!this.attrs[e.id],n(o.CheckboxControl,i)}},{key:"radioFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.selected=i.value,n(o.RadioControl,i)}},{key:"rangeFieldEl",value:function(e,t){return n(o.RangeControl,this.fieldProps(e,t))}},{key:"selectFieldEl",value:function(e,t){return n(o.SelectControl,this.fieldProps(e,t))}},{key:"orderedSelectFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return n(o.BaseControl,i,n(_multiSelectComponent.default,i))}},{key:"fontFieldEl",value:function(t,i){t.tpl||(t.tpl="font-family: %s;");var a=this.fieldProps(t,i),r=a.onChange;return a.onChange=function(t){if(!t.includes(",")){var n=e("<link rel='stylesheet' class='caxton-google-font'>");n.attr("href","https://fonts.googleapis.com/css?family=".concat(t)),e("body").append(n)}r(t)},a.options=caxton.fonts,n(o.SelectControl,a)}},{key:"textFieldEl",value:function(e,t){return n(o.TextControl,this.fieldProps(e,t))}},{key:"customFieldEl",value:function(e,t){return e.render(this.fieldProps(e),this)}},{key:"textareaFieldEl",value:function(e,t){return n(o.TextareaControl,this.fieldProps(e,t))}},{key:"dateTimeFieldEl",value:function(e,t){return datetimeFieldEl(e,t)}},{key:"datetimeFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.currentDate=i.value,n(o.PanelBody,{title:i.label},n(o.DateTimePicker,i))}},{key:"toggleFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.checked=!!this.attrs[e.id],n(o.ToggleControl,i)}},{key:"iconFieldEl",value:function(t,i){var a=this.fieldProps(t,i),l=[];a.title=a.label,a.className="caxton-icon-picker-panel";for(var s=0;s<100;s++){var c=caxtonFAIconsData[s];l.push(u(c.n,{key:s,className:"icon-choice","data-icon":c.n},"i"))}return l.push(n("p",{key:"helptext"},"Search icons for more from all Font Awesome icons")),n(o.PanelBody,a,n("div",{className:"caxton-icon-picker",onClick:function(t){var n=t.target,i=e(n).closest(".icon-choice");i.length&&a.onChange(i.html())}},n("input",{type:"text",placeholder:r("Search icons","caxton"),onKeyUp:function(t){var n,i=t.target,o=i.value,a=0;o=o.toLowerCase(),(n=e(i).siblings(".caxton-matching-icons")).html("");for(var r=0;a<50&&r<caxtonFAIconsData.length;r++){var l=caxtonFAIconsData[r];l.n.includes(o)?(a++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice">')+u(l.n,!1)+"</i>")):a<34&&l.s.includes(o)&&(a++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice order-2">')+u(l.n,!1)+"</i>"))}}}),n("span",{className:"dashicons dashicons-search",title:r("Search","caxton")}),n("span",{className:"dashicons dashicons-no",title:r("Remove icon","caxton"),style:{cursor:"pointer",display:a.value?"block":"none"},onClick:function(){a.onChange("")}}),n("div",{className:"caxton-matching-icons",onClick:function(e){var t=e.target;"I"===t.tagName&&a.onChange(" ".concat(t.className.replace(" o-70","")))}},l)))}},{key:"positionFieldEl",value:function(e,t){var i=this.fieldProps(e,t);return i.selected=i.value,i.options=[{value:"center top",label:"Top"},{value:"",label:"Center"},{value:"center bottom",label:"Bottom"}],n(o.RadioControl,i)}},{key:"AlignmentToolbarInit",value:function(t,i){var a=this.fieldProps(t,i),l=e.extend({left:"tl",right:"tr",center:"tc",justify:"tj"},a.values||{});return a.controls=[{icon:"editor-alignleft",title:r("Align left"),isActive:a.value===l.left,onClick:function(){a.onChange(l.left)}},{icon:"editor-aligncenter",title:r("Align center"),isActive:a.value===l.center,onClick:function(){a.onChange(l.center)}},{icon:"editor-alignright",title:r("Align right"),isActive:a.value===l.right,onClick:function(){a.onChange(l.right)}},{icon:"editor-justify",title:r("Align justify"),isActive:a.value===l.justify,onClick:function(){a.onChange(l.justify)}}],a.wideControlsEnabled=!0,n(o.Toolbar,a)}},{key:"BlockWidthToolbarInit",value:function(e,t){var i=this.fieldProps(e,t);return i.controls=[{icon:"align-center",title:r("Default"),isActive:!i.value,onClick:function(){i.onChange("")}},{icon:"align-wide",title:r("Wide width"),isActive:" vw-100-bg"===i.value,onClick:function(){i.onChange(" vw-100-bg")}},{icon:"align-full-width",title:r("Full width"),isActive:" vw-100"===i.value,onClick:function(){i.onChange(" vw-100")}}],i.wideControlsEnabled=!0,n(o.Toolbar,i)}},{key:"BlockAlignToolbarInit",value:function(e,t){var i=this.fieldProps(e,t);return i.controls=[{icon:"align-left",title:r("Align left"),isActive:" fl"===i.value,onClick:function(){i.onChange(" fl")}},{icon:"align-center",title:r("Align center"),isActive:!i.value,onClick:function(){i.onChange("")}},{icon:"align-right",title:r("Align right"),isActive:" rl"===i.value,onClick:function(){i.onChange(" rl")}}],i.wideControlsEnabled=!0,n(o.Toolbar,i)}},{key:"renderPanel",value:function(t){this.fields;var i,a={};return this.sections[t]&&(a=this.sections[t]),(a=e.extend(a,{title:t,className:"",key:"CaxtonPanel".concat(t),initialOpen:!1})).className+="caxton-section caxton-section-".concat(t.toLowerCase().replace(/[^0-z]/g,"-")),i=this.renderFields(this.sectionsFields[t],t),n(o.PanelBody,a,i)}},{key:"fieldEl",value:function(e,t,n){return void 0===n&&(n=this.keySuffix++),t||(t=e.type+"FieldEl"),this[t](e,n)}},{key:"renderFields",value:function(e,t,n){var i=[],o=[];n||(n="FieldEl");for(var a=0;a<e.length;a++){var r,l=e[a];n.includes("Toolbar")&&(l.type=l.type.replace("Toolbar","")),"function"==typeof l.render&&(l.type="custom"),"function"==typeof this[r=l.type+n]?l.hide||(t?l.section==t&&i.push(this.fieldEl(l,r,a)):l.section?o.includes(l.section)||(o.push(l.section),i.push(this.renderPanel(l.section))):i.push(this.fieldEl(l,r,a))):l.type.includes("Toolbar")||console.error("".concat(n.replace("Init","")," ").concat(l.id," of type ").concat(l.type," and callback ").concat(r," not supported."))}return i}},{key:"resizableElement",value:function(e,t,i){var a,r=(i=i||this.props).attributes,l=i.setAttributes,s=i.isSelected,c=e.height,u=e.width,p=_slicedToArray(wp.element.useState(!1),2),d=p[0],f=p[1];if(c||u){a=(e=jQuery.extend({enable:[],onResizeStop:function(){},onResize:function(){},onResizeStart:function(){}},e)).enable.toString().toLowerCase();var h={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},v={key:"caxton-resizable",className:{"caxton-resizable":!0,"is-selected":s,"is-resizing":d},size:{},onResizeStop:function(t,n,i,o){e.onResizeStop(t,n,i,o),f(!1)},onResize:function(t,n,i,o){e.onResize(t,n,i,o);var a={};c&&(a[c]=i.style.height),u&&(a[u]=i.style.width),l(a)},onResizeStart:function(t,n,i,o){e.onResizeStart(t,n,i,o),f(!0)}};return e.size&&(v.size=e.size),c&&(r[c]&&(v.size.height=r[c]),v.minHeight=e.minHeight||50,a.indexOf("top")>-1||a.indexOf("bottom")>-1||e.enable.push("bottom")),u&&(r[u]&&(v.size.width=r[u]),v.minWidth=e.minWidth||50,a.indexOf("left")>-1||a.indexOf("right")>-1||e.enable.push("right")),e.enable.forEach(function(e){h.hasOwnProperty(e)&&(h[e]=!0)}),v.enable=h,n(o.ResizableBox,v,n("div",{className:"caxton-resizable-contents h-100"},t))}return t}},{key:"toolbarElements",value:function(){var e=this.renderFields(this.toolbars,!1,"ToolbarInit");if(e.length)return n(a.BlockControls,{key:"toolbars"},e)}},{key:"inspectorFields",value:function(){var e=this.fields,t=[];if((t=t.concat(this.renderFields(e)))&&t.length)return n(a.InspectorControls,{key:"inspector"},t)}},{key:"populateField_editable",value:function(e,t,n){var i=r("Click to Edit");return t.tag||(t.tag="span"),n?(e===t.default&&(e="<".concat(t.tag,' class="default">').concat(e,"</").concat(t.tag,">")),e="<".concat(t.tag,' contentEditable="true" title="').concat(i,'" data-caxtonEditableProp="').concat(t.id,'">').concat(e,"</").concat(t.tag,">")):e&&(e="<".concat(t.tag,">").concat(e,"</").concat(t.tag,">")),e}},{key:"populateField_overlay",value:function(e,t){return"1"}},{key:"populateField_background",value:function(e,t){return"1"}},{key:"populateFields",value:function(e,t){if(!e)return"";for(var n in this.fields)if(this.fields.hasOwnProperty(n)){var i,o=this.fields[n],a=i=this.attrs[o.id];"function"==typeof this["populateField_"+o.type]&&(a=this["populateField_"+o.type](a,o,t)),(a||"number"==typeof a)&&o.tpl&&(a=this.callbackValue(o.tpl,a).replace(/%s/g,a)),e=(e=e.split("{{_".concat(o.id,"}}")).join(i)).split("{{".concat(o.id,"}}")).join(a)}return e}},{key:"parseTpl",value:function(e,t){return e=this.populateFields(e,t),this.populateFields(e,t)}},{key:"outputHTML",value:function(e,t){return{__html:this.parseTpl(e,t)}}},{key:"callbackValue",value:function(e,t){return"function"==typeof e?e(t,this):e}},{key:"editableTpl",value:function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this;return i=this.callbackValue(i,t),o=s({key:"block",dangerouslySetInnerHTML:a.outputHTML(i,"edit"),onClick:function(e){e.preventDefault()},onKeyDown:function(t){var n=t.target,i=e(n).find(".default");i.length&&i.remove()},onBlur:function(t){var n=t.target,i=e(n),o={};o[i.attr("data-caxtonEditableProp")]=i.html(),a.focussedProps.setAttributes(o)}},o),n("div",o)}},{key:"edit",value:function(e){if(this.block)return"function"==typeof this.block.edit?this.block.edit(e,this):this.editableTpl(e,this.tpl)}},{key:"save",value:function(e){this.block.id;if(this.block)return"function"==typeof this.block.save?this.block.save(e,this):n("div",{dangerouslySetInnerHTML:this.outputHTML(this.callbackValue(this.tpl,e))})}},{key:"saveBlockProperties",value:function(e){this.props=e,this.saveBlockAttributes(this.props.attributes)}},{key:"saveBlockAttributes",value:function(e){for(var t in this.attrs=e,this.fields)if(this.fields.hasOwnProperty(t)){var n=this.fields[t];!this.attrs[n.id]&&isNaN(this.attrs[n.id])?this.attrs[n.id]=n.default:"image"===n.type&&this.attrs[n.id].indexOf("featured_image")>-1?this.attrs[n.id]=caxton.content_vars[this.attrs[n.id]]:this.attrs[n.id]=this.attrs[n.id]}}},{key:"registerBlock",value:function(){var t,i=this,o=this.block,a=e.extend({},o);if(o.icon.includes("<svg")){var r=jQuery(o.icon),u={};e.each(r[0].attributes,function(){this.specified&&(t=this.name.replace(/[-:]([a-z])/g,function(e){return e[1].toUpperCase()}),u[t]=this.value)}),u.height=20,u.width=20,o.icon=c(r.html(),u,"svg")}delete a.fields,delete a.tpl,delete a.id,a.icon=o.icon;var p=function(e){var t=[];if(i.saveBlockProperties(e),"function"==typeof i.block.beforeEdit){var o=i.block.beforeEdit(e,i);o&&t.push(o)}e.isSelected&&(i.focussedProps=e,t.push(i.inspectorFields()),t.push(i.toolbarElements()));var a=i.edit(e);if(i.block.resizable&&(a=i.resizableElement(i.block.resizable,a)),t.push(a),"function"==typeof i.block.afterEdit){var r=i.block.afterEdit(e,i);r&&t.push(r)}return n("div",{key:"block-content"},t)};if(a.edit=p,a.getEditWrapperProps=function(e){i.saveBlockAttributes(e);var t={},n=e.Layout,a=e.BlockAlignment;if(a=a||e["Block Alignment"],n&&(t["caxton-layout"]=n),a){t["data-align"]={" fl":"left"," rl":"right"}[a]}return"function"==typeof o.registerBlockProps&&(t=jQuery.extend(o.registerBlockProps(e,i),t)),"function"==typeof i.block.wrapperProps&&(t=i.block.wrapperProps(t,e,i)),t},a.save=function(e){return i.saveBlockProperties(e),i.save(e)},void 0!==o.apiUrl){"function"!=typeof o.apiUrl&&(o.apiUrl=function(){return{apiData:o.apiUrl}}),"function"==typeof o.apiCallback&&(i.block.edit=o.apiCallback);a.edit=function(e){var t=_slicedToArray(wp.element.useState("{}"),2),n=t[0],i=t[1],a=JSON.parse(n),r=o.apiUrl(e),l=function(e){r.hasOwnProperty(e)&&(a[e]&&r[e]===a[e].path||(a[e]={},wp.apiFetch({path:r[e]}).then(function(t){a[e].data!==t&&(a[e].data=t,a[e].path=r[e],i(JSON.stringify(a)))})))};for(var c in r)l(c);return p(s(_objectSpread({},e),a))},"function"!=typeof this.block.save&&(a.save=function(){return null})}-1===o.id.indexOf("/")&&(o.id="caxton/".concat(o.id)),l(o.id,a)}}]),t}();p.prototype.orderedselectFieldEl=p.prototype.orderedSelectFieldEl,window.CaxtonBlock=function(e){return new p(e)},window.CaxtonContentBlock=function(e){for(var t=Caxton.copyObj({tag:"div",props:{},tplProps:{},innerProps:{classname:"caxton-content-wrapper"},prefix:"",prefixProps:{},suffix:"",suffixProps:{},template:[]},e),i=["tag","props","innerProps","template","prefix","prefixProps","tplProps","suffix","suffixProps"],o=0;o<i.length;o++){delete e[i[o]]}return e.edit=function(e,i){var o=function(t){return i.callbackValue(t,e)};return n(t.tag,o(t.props),t.prefix&&i.editableTpl(e,o(t.prefix),o(t.prefixProps)),t.tpl&&i.editableTpl(e,o(t.tpl),o(t.tplProps)),n("div",o(t.innerProps),n(a.InnerBlocks,{template:t.template})),t.suffix&&i.editableTpl(e,o(t.suffix),o(t.suffixProps)))},e.save=function(e,i){var o=function(t){return i.callbackValue(t,e)};return n(t.tag,i.callbackValue(t.props),t.prefix&&c(i.outputHTML(o(t.prefix)),o(t.prefixProps)),t.tpl&&c(i.outputHTML(o(t.tpl)),o(t.tplProps)),n("div",o(t.innerProps),n(a.InnerBlocks.Content)),t.suffix&&c(i.outputHTML(o(t.suffix)),o(t.suffixProps)))},new p(e)},window.caxtonRegisterFieldType=function(e,t){},window.Caxton={el:n,el2html:function(e){var t="";if(e){e.length||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];switch(_typeof(i)){case"object":t+=wp.element.renderToString(i);break;default:t+=i}}}return t},html2el:c,copyObj:s,styleObject:function(e){for(var t={},n=e.split(";"),i=0;i<n.length;i++){var o=n[i].split(/:(.+)/);t[o[0]]=o[1]}return t},tplProc:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));return e},iconSvg:u}}initCaxton(jQuery,wp.blocks,wp.element.createElement,window.wp.i18n,wp.components),jQuery(function(e){setTimeout(function(){if("string"==typeof ajaxurl){for(var t,n,i=wp.data.select("core/blocks").getBlockTypes(),o={},a=0;a<i.length;a++)n="object"===_typeof(n=(t=i[a]).icon.src)?Caxton.el2html(n):'<span class="dashicons dashicons-'.concat(n,'"></span>'),o[t.name]={title:t.title,icon:n,category:t.category};e.post(ajaxurl,{action:"caxton_save_blocks",blocks:JSON.stringify(o)})}},2500)}),setTimeout(function(){CaxtonUtils.asset("icons-data.js"),CaxtonUtils.asset("icons-svg.js")},2500);

},{"./es6/multiSelectComponent.es6":2}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=MultiSelectComponent;var _reactSortableList=_interopRequireDefault(require("./react-sortable-list.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],o=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(o=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);o=!0);}catch(e){r=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(r)throw n}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function optionEl(e){var t=window.Caxton.el;return t("div",{className:"caxton-orderedselect-option","data-val":e.value,key:"option-".concat(e.value)},e.image?t("img",{src:e.image}):null,e.label)}function MultiSelectComponent(e){var t=window.Caxton.el;$=window.jQuery;for(var a,o,r=_slicedToArray(wp.element.useState(""),2),n=r[0],l=r[1],i=e.delimiter?e.delimiter:",",s=void 0===e.multiple||e.multiple,c={},u={},d=[],p=e.value?e.value.split(i):[],v=0;v<e.options.length;v++)if(o=optionEl(a=e.options[v]),"number"==typeof a.value&&(a.value=a.value.toString()),-1!==p.indexOf(a.value))c[a.value]=a,u[a.value]=o;else{if(d.length>99)continue;(!n||a.label.toLowerCase().indexOf(n.toLowerCase())>-1)&&d.push(o)}return d.length<2&&d.push(t("span",{className:"caxton-placeholder o70",key:"placeholder"},"No items found".concat(n&&" for "+n,"..."))),d.splice(0,0,t("input",{className:"caxton-orderedselect-search",placeholder:"Search...",value:n,onChange:function(e){var t=e.target;return l(t.value)},key:"search"})),t("div",{className:"caxton-orderedselect-wrap",key:"orderedselect-wrap"},t("div",{className:"caxton-orderedselect-selected",key:"selected-options",onClick:function(t){var a,o=t.target,r=$(o);r.hasClass("caxton-orderedselect-option")?(a=r.attr("data-val"),p.splice(p.indexOf(a),1),e.onChange(p.join(i))):r.closest(".caxton-orderedselect-wrap").toggleClass("caxton-orderedselect-open")}},t(_reactSortableList.default,{data:p,renderItem:function(e){return u[e]},onChange:function(t){e.onChange(t.join(i))}}),!p.length&&t("span",{className:"caxton-placeholder o70",key:"placeholder"},"Please choose..."),t("i",{className:"dashicons dashicons-arrow-down",key:"down-arrow-icon"})),t("div",{className:"caxton-orderedselect-available",key:"available-options",onClick:function(t){var a,o=t.target,r=$(o);r.hasClass("caxton-orderedselect-option")&&(a=r.attr("data-val"),s?p.push(a):p=[a],e.onChange(p.join(i)))}},d))}

},{"./react-sortable-list.es6":3}],3:[function(require,module,exports){
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(r,!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var SortableItems=function(e){function t(e){var r;_classCallCheck(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e));var o=document.createElement("div");return o.className="placeholder",r.state={data:_toConsumableArray(e.data),placeholder:o},r.dragEnd=r.dragEnd.bind(_assertThisInitialized(r)),r.dragStart=r.dragStart.bind(_assertThisInitialized(r)),r.dragOver=r.dragOver.bind(_assertThisInitialized(r)),r}return _inherits(t,wp.element.Component),_createClass(t,[{key:"componentWillMount",value:function(){this.setState({data:_toConsumableArray(this.props.data)})}},{key:"componentDidUpdate",value:function(e){this.props.data.length===this.state.data.length&&JSON.stringify(this.props.data)===JSON.stringify(e.data)||this.setState({data:_toConsumableArray(this.props.data)})}},{key:"sortData",value:function(e,t){var r=_toConsumableArray(this.state.data);r.splice(t,0,r.splice(e,1)[0]),(this.props.onChange||function(e){return null})(r),this.setState({data:r})}},{key:"dragStart",value:function(e){this.dragged=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.currentTarget),this.state.placeholder.style.height=this.dragged.offsetHeight+"px"}},{key:"dragEnd",value:function(e){this.dragged.style.display="block",this.dragged.parentNode.removeChild(this.state.placeholder);var t=Number(this.dragged.dataset.ind),r=Number(this.over.dataset.ind);t<r&&r--,"after"==this.nodePlacement&&r++,this.sortData(t,r)}},{key:"dragOver",value:function(e){if(e.preventDefault(),this.dragged.style.display="none","placeholder"!=e.target.className){for(this.over=e.target;!this.over.classList.contains("sortable-items--item");){if(this.over.classList.contains("sortable-items--wrap"))return;this.over=this.over.parentNode}var t=this.dragged.offsetTop-this.over.offsetTop,r=this.over.offsetHeight/2,o=this.over.parentNode;t>r?(this.nodePlacement="after",o.insertBefore(this.state.placeholder,this.over.nextElementSibling)):t<r&&(this.nodePlacement="before",o.insertBefore(this.state.placeholder,this.over))}}},{key:"renderItem",value:function(e,t){var r=window.Caxton.el,o=this.props.renderItem;o||(o=function(e){return e});var n=_objectSpread({key:t,draggable:"true",onDragEnd:this.dragEnd,onDragStart:this.dragStart,className:"","data-ind":t},this.props.itemProps||{});return n.className+=" sortable-items--item",r("div",n,o(e))}},{key:"render",value:function(){var e=this,t=window.Caxton.el,r=this.state.data.map(function(t,r){return e.renderItem(t,r)}),o=_objectSpread({onDragOver:this.dragOver,className:""},this.props.wrapProps||{});return o.className+=" sortable-items--wrap",t("div",o,r)}}]),t}();exports.default=SortableItems;

},{}]},{},[1]);
