(function(){function u(a,r,l){function c(o,e){if(!r[o]){if(!a[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(s)return s(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var i=r[o]={exports:{}};a[o][0].call(i.exports,function(e){var t=a[o][1][e];return c(t||e)},i,i.exports,u,a,r,l)}return r[o].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}return u})()({1:[function(e,t,o){"use strict";function d(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?n(e):t}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),e}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(p,e,f,t,h){window.caxtonWPEditor=wp.blockEditor?wp.blockEditor:wp.editor;var a=caxtonWPEditor,r=t.__,c=e.registerBlockType,s=function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},u=function(e,t,o){t||(t={}),o||(o="div");var n=p.extend({dangerouslySetInnerHTML:{__html:e}},t);return f(o,n)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=caxtonFAIconsSvg[e];if(o||(o=caxtonFAIconsSvg[e+"-solid"])||(o=caxtonFAIconsSvg[e+"-brand"])||(o=caxtonFAIconsSvg[e+"-regular"]),t){var n="object"===k(t)?t:{};return u(o,n)}return o},o=function(){function o(e){y(this,o);var t=this;this.keySuffix=0,e.id||console.error("Parameter `id` is required for CaxtonBlock"),this.block=p.extend({title:e.id,icon:"star-filled",category:"layout",fields:{},attributes:{}},e),t.tpl=e.tpl,e.toolbars?e.fields=jQuery.extend(e.fields,e.toolbars):e.toolbars={},e.resizable&&(e.resizable.height&&(this.block.attributes[e.resizable.height]={type:"string"}),e.resizable.width&&(this.block.attributes[e.resizable.width]={type:"string"})),t.fields=t.processFields(e.fields),t.sections=e.sections?e.sections:{},t.sectionsFields=t.processSections(t.fields),t.toolbars=t.processFields(e.toolbars),t.registerBlock()}return b(o,[{key:"preprocessField_background",value:function(e,t){Object.assign(t[e],{section:"Background",tpl:'<div class="cover bg-center absolute absolute--fill" style="background-color:{{Background color}};{{Gradient type}}{{Background image}}{{Background image position}}{{Background parallax}}"></div><div class="absolute absolute--fill" style="background-color:{{Background color}};{{Gradient type}}{{Background colors opacity}}"></div>'});var o=t[e];Object.assign(t,{"Background image":{type:"image",section:o.section,tpl:"background-image:url(%s);"},"Background image position":{type:"position",section:o.section,tpl:"background-position:%s;"},"Background parallax":{type:"toggle",value:"background-attachment:fixed;",section:o.section},"Background color":{type:"color",section:o.section},"Gradient color":{type:"color",section:o.section,tpl:", %s"},"Gradient type":{type:"select",options:[{value:"linear-gradient( ",label:"Linear vertical"},{value:"linear-gradient( 90deg, ",label:"Linear horizontal"},{value:"linear-gradient( 45deg, ",label:"Linear 45 deg"},{value:"linear-gradient( -45deg, ",label:"Linear 45 deg anticlockwise"},{value:"radial-gradient( ",label:"Radial gradient"}],default:"linear-gradient( ",section:o.section,tpl:"background-image:%s{{Background color}}{{Gradient color}});"},"Background colors opacity":{type:"range",min:0,max:1,step:.05,help:"Reduce opacity to have transparent colors over image",default:"1",section:o.section,tpl:"opacity:%s;"}})}},{key:"preprocessFields",value:function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].type&&"function"==typeof this["preprocessField_"+e[t].type]&&this["preprocessField_"+e[t].type](t,e);return e}},{key:"processFields",value:function(e){var t=[];for(var o in e=this.preprocessFields(e))if(e.hasOwnProperty(o)){var n=e[o],i={};"object"===k(n)?i=n:i.type=n,i.id=o,i.label=i.label?i.label:o,"checkbox"!==i.type&&"toggle"!==i.type||(i.value=i.value||"1"),!i.default&&isNaN(i.default)&&(i.default=""),i.attr?this.block.attributes[o]=i.attr:this.block.attributes[o]={type:this.fieldAttrType(i)},t.push(i)}return t}},{key:"fieldAttrType",value:function(e){var t=e.type,o={number:"number",range:"number"};return o[t]?o[t]:"string"}},{key:"processSections",value:function(e){for(var t={},o=0;o<e.length;o++){var n=e[o].section;n&&(t[n]||(t[n]=[]),t[n].push(e[o]))}return t}},{key:"fieldProps",value:function(n,e){var i=n.id,a=this,t=p.extend({},n);return t.key="".concat(t.type,"-").concat(e),t.onChange||(t.value=a.attrs[i],t.onChange=function(e,t){var o={};o[i]=e,"checkbox"!==n.type&&"toggle"!==n.type||(o[i]=e?n.value:""),a.focussedProps.setAttributes(o),"function"==typeof n.onChange&&n.onChange(e,a,t)},delete t.id,delete t.type),t}},{key:"backgroundFieldEl",value:function(e,t){return null}},{key:"imageFieldEl",value:function(e,t){var o=this.fieldProps(e,t);o.className||(o.className="");var n=r("Select image"),i=null;return o.value&&(o.value.indexOf("featured_image")>-1&&o.onChange(caxton.content_vars[o.value]),n=[f("img",{src:o.value,key:"image"}),r("Click the image to edit or update")],i=f("a",{className:"caxton-remove-image",href:"#",onClick:function(){o.onChange("",{})}},f("i",{className:"dashicons dashicons-no"}),"Remove")),o.className+=" caxton-image-picker",f(h.BaseControl,o,f(a.MediaUpload,{key:"imagePicker",onSelect:function(e){o.onChange(e.url,e)},type:"image",value:o.value,label:o.label,render:function(e){var t=e.open;return f("span",{className:"v-mid dib"},i,f(h.Button,{className:o.value?"image-button":"button button-large",onClick:t},n))}}))}},{key:"colorFieldEl",value:function(e,t){var o=[],n=this.fieldProps(e,t);return n.title=n.label,void 0===n.initialOpen&&(n.initialOpen=!n.value),e.help&&o.push(e.help),n.colorSettings=[{label:n.label,value:n.value,onChange:n.onChange}],f(caxtonWPEditor.PanelColorSettings,n,o)}},{key:"checkboxFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.checked=!!this.attrs[e.id],f(h.CheckboxControl,o)}},{key:"radioFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.selected=o.value,f(h.RadioControl,o)}},{key:"rangeFieldEl",value:function(e,t){return f(h.RangeControl,this.fieldProps(e,t))}},{key:"selectFieldEl",value:function(e,t){return f(h.SelectControl,this.fieldProps(e,t))}},{key:"orderedSelectFieldEl",value:function(e,t){for(var o,n,i=this.fieldProps(e,t),a=i.delimiter?i.delimiter:",",r=void 0===i.multiple||i.multiple,l={},c=[],s=[],u=i.value?i.value.split(a):[],d=0;d<i.options.length;d++)o=i.options[d],n=f("div",{className:"caxton-orderedselect-option","data-val":o.value,key:"option-".concat(o.value)},o.image?f("img",{src:o.image}):null,o.label),"number"==typeof o.value&&(o.value=o.value.toString()),u.includes(o.value)?l[o.value]=o:s.push(n);for(d=0;d<u.length;d++)o=l[u[d]],n=f("div",{className:"caxton-orderedselect-option","data-val":o.value,key:"option-".concat(o.value)},o.image?f("img",{src:o.image}):null,o.label),c.push(n);return c.length||c.push(f("span",{className:"caxton-placeholder o70",key:"placeholder"},"Please choose...")),c.push(f("i",{className:"dashicons dashicons-arrow-down",key:"down-arrow-icon"})),f(h.BaseControl,i,f("div",{className:"caxton-orderedselect-wrap",key:"orderedselect-wrap"},f("div",{className:"caxton-orderedselect-selected",key:"selected-options",onClick:function(e){var t,o=e.target,n=p(o);n.hasClass("caxton-orderedselect-option")?(t=n.attr("data-val"),u.splice(u.indexOf(t),1),i.onChange(u.join(a))):n.closest(".caxton-orderedselect-wrap").toggleClass("caxton-orderedselect-open")}},c),f("div",{className:"caxton-orderedselect-available",key:"available-options",onClick:function(e){var t,o=e.target,n=p(o);n.hasClass("caxton-orderedselect-option")&&(t=n.attr("data-val"),r?u.push(t):u=[t],i.onChange(u.join(a)))}},s)))}},{key:"fontFieldEl",value:function(e,t){e.tpl||(e.tpl="font-family: %s;");var o=this.fieldProps(e,t),n=o.onChange;return o.onChange=function(e){if(!e.includes(",")){var t=p("<link rel='stylesheet' class='caxton-google-font'>");t.attr("href","https://fonts.googleapis.com/css?family=".concat(e)),p("body").append(t)}n(e)},o.options=caxton.fonts,f(h.SelectControl,o)}},{key:"textFieldEl",value:function(e,t){return f(h.TextControl,this.fieldProps(e,t))}},{key:"customFieldEl",value:function(e,t){return e.render(this.fieldProps(e),this)}},{key:"textareaFieldEl",value:function(e,t){return f(h.TextareaControl,this.fieldProps(e,t))}},{key:"toggleFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.checked=!!this.attrs[e.id],f(h.ToggleControl,o)}},{key:"iconFieldEl",value:function(e,t){var n=this.fieldProps(e,t),o=[];n.title=n.label,n.className="caxton-icon-picker-panel";for(var i=0;i<100;i++){var a=caxtonFAIconsData[i];o.push(l(a.n,{key:i,className:"icon-choice","data-icon":a.n},"i"))}return o.push(f("p",{key:"helptext"},"Search icons for more from all Font Awesome icons")),f(h.PanelBody,n,f("div",{className:"caxton-icon-picker",onClick:function(e){var t=e.target,o=p(t).closest(".icon-choice");o.length&&(console.log(o.html()),n.onChange(o.html()))}},f("input",{type:"text",placeholder:r("Search icons","caxton"),onKeyUp:function(e){var t,o=e.target,n=o.value,i=0;n=n.toLowerCase(),(t=p(o).siblings(".caxton-matching-icons")).html("");for(var a=0;i<50&&a<caxtonFAIconsData.length;a++){var r=caxtonFAIconsData[a];r.n.includes(n)?(i++,t.append('<i data-icon="'.concat(r.n,'" class="icon-choice">')+l(r.n,!1)+"</i>")):i<34&&r.s.includes(n)&&(i++,t.append('<i data-icon="'.concat(r.n,'" class="icon-choice order-2">')+l(r.n,!1)+"</i>"))}}}),f("span",{className:"dashicons dashicons-search",title:r("Search","caxton")}),f("span",{className:"dashicons dashicons-no",title:r("Remove icon","caxton"),style:{cursor:"pointer",display:n.value?"block":"none"},onClick:function(){n.onChange("")}}),f("div",{className:"caxton-matching-icons",onClick:function(e){var t=e.target;"I"===t.tagName&&n.onChange(" ".concat(t.className.replace(" o-70","")))}},o)))}},{key:"positionFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.selected=o.value,o.options=[{value:"center top",label:"Top"},{value:"",label:"Center"},{value:"center bottom",label:"Bottom"}],f(h.RadioControl,o)}},{key:"AlignmentToolbarInit",value:function(e,t){var o=this.fieldProps(e,t);return o.controls=[{icon:"editor-alignleft",title:r("Align left"),isActive:" tl"===o.value,onClick:function(){o.onChange(" tl")}},{icon:"editor-aligncenter",title:r("Align center"),isActive:" tc"===o.value,onClick:function(){o.onChange(" tc")}},{icon:"editor-alignright",title:r("Align right"),isActive:" tr"===o.value,onClick:function(){o.onChange(" tr")}}],o.wideControlsEnabled=!0,f(h.Toolbar,o)}},{key:"BlockWidthToolbarInit",value:function(e,t){var o=this.fieldProps(e,t);return o.controls=[{icon:"align-center",title:r("Default"),isActive:!o.value,onClick:function(){o.onChange("")}},{icon:"align-wide",title:r("Wide width"),isActive:" vw-100-bg"===o.value,onClick:function(){o.onChange(" vw-100-bg")}},{icon:"align-full-width",title:r("Full width"),isActive:" vw-100"===o.value,onClick:function(){o.onChange(" vw-100")}}],o.wideControlsEnabled=!0,f(h.Toolbar,o)}},{key:"BlockAlignToolbarInit",value:function(e,t){var o=this.fieldProps(e,t);return o.controls=[{icon:"align-left",title:r("Align left"),isActive:" fl"===o.value,onClick:function(){o.onChange(" fl")}},{icon:"align-center",title:r("Align center"),isActive:!o.value,onClick:function(){o.onChange("")}},{icon:"align-right",title:r("Align right"),isActive:" rl"===o.value,onClick:function(){o.onChange(" rl")}}],o.wideControlsEnabled=!0,f(h.Toolbar,o)}},{key:"renderPanel",value:function(e){this.fields;var t,o={};return this.sections[e]&&(o=this.sections[e]),(o=p.extend(o,{title:e,className:"",key:"CaxtonPanel".concat(e),initialOpen:!1})).className+="caxton-section caxton-section-".concat(e.toLowerCase().replace(/[^0-z]/g,"-")),t=this.renderFields(this.sectionsFields[e],e),f(h.PanelBody,o,t)}},{key:"fieldEl",value:function(e,t,o){return void 0===o&&(o=this.keySuffix++),t||(t=e.type+"FieldEl"),this[t](e,o)}},{key:"renderFields",value:function(e,t,o){var n=[],i=[];o||(o="FieldEl");for(var a=0;a<e.length;a++){var r,l=e[a];o.includes("Toolbar")&&(l.type=l.type.replace("Toolbar","")),"function"==typeof l.render&&(l.type="custom"),"function"==typeof this[r=l.type+o]?l.hide||(t?l.section==t&&n.push(this.fieldEl(l,r,a)):l.section?i.includes(l.section)||(i.push(l.section),n.push(this.renderPanel(l.section))):n.push(this.fieldEl(l,r,a))):l.type.includes("Toolbar")||console.error("".concat(o.replace("Init","")," ").concat(l.id," of type ").concat(l.type," and callback ").concat(r," not supported."))}return n}},{key:"resizableElement",value:function(e,t){var o,n=this.props,i=this.attrs,a=(n.toggleSelection,n.setAttributes),r=n.isSelected,l=e.height,c=e.width;if(l||c){o=(e=jQuery.extend({enable:[]},e)).enable.toString().toLowerCase();var s={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},u={className:{"is-selected":r},size:{},onResize:function(e,t,o,n){var i={};l&&(i[l]=o.clientHeight),c&&(i[c]=o.clientWidth),a(i)},onResizeStart:function(){}};return l&&(i[l]&&(u.size.height=i[l]),u.minHeight=e.minHeight||100,o.indexOf("top")>-1||o.indexOf("bottom")>-1||e.enable.push("bottom")),c&&(i[c]&&(u.size.width=i[c]),u.minWidth=e.minWidth||70,o.indexOf("left")>-1||o.indexOf("right")>-1||e.enable.push("right")),e.enable.forEach(function(e){s.hasOwnProperty(e)&&(s[e]=!0)}),u.enable=s,console.log(u),f(h.ResizableBox,u,t)}return t}},{key:"toolbarElements",value:function(){var e=this.renderFields(this.toolbars,!1,"ToolbarInit");if(e.length)return f(a.BlockControls,{key:"toolbars"},e)}},{key:"inspectorFields",value:function(){var e=this.fields,t=[];if((t=t.concat(this.renderFields(e)))&&t.length)return f(a.InspectorControls,{key:"inspector"},t)}},{key:"populateField_editable",value:function(e,t,o){var n=r("Click to Edit");return t.tag||(t.tag="span"),o?(e===t.default&&(e="<".concat(t.tag,' class="default">').concat(e,"</").concat(t.tag,">")),e="<".concat(t.tag,' contentEditable="true" title="').concat(n,'" data-caxtonEditableProp="').concat(t.id,'">').concat(e,"</").concat(t.tag,">")):e&&(e="<".concat(t.tag,">").concat(e,"</").concat(t.tag,">")),e}},{key:"populateField_background",value:function(e,t){return"1"}},{key:"populateFields",value:function(e,t){if(!e)return"";for(var o in this.fields)if(this.fields.hasOwnProperty(o)){var n,i=this.fields[o],a=n=this.attrs[i.id];"function"==typeof this["populateField_"+i.type]&&(a=this["populateField_"+i.type](a,i,t)),(a||"number"==typeof a)&&i.tpl&&(a=this.getTpl(i.tpl,a).replace(/%s/g,a)),e=(e=e.split("{{_".concat(i.id,"}}")).join(n)).split("{{".concat(i.id,"}}")).join(a)}return e}},{key:"outputHTML",value:function(e,t){return e=this.populateFields(e,t),{__html:e=this.populateFields(e,t)}}},{key:"getTpl",value:function(e,t){return"function"==typeof e?e(t,this):e}},{key:"getBlockTpl",value:function(e){return this.getTpl(this.tpl,e)}},{key:"edit",value:function(e){var i=this;if(i.block)return"function"==typeof i.block.edit?i.block.edit(e,i):f("div",{key:"block",dangerouslySetInnerHTML:i.outputHTML(i.getBlockTpl(e),"edit"),onClick:function(e){e.preventDefault()},onKeyDown:function(e){var t=e.target,o=p(t).find(".default");o.length&&o.remove()},onBlur:function(e){var t=e.target,o=p(t),n={};n[o.attr("data-caxtonEditableProp")]=o.html(),i.focussedProps.setAttributes(n)}})}},{key:"save",value:function(e){this.block.id;if(this.block)return"function"==typeof this.block.save?this.block.save(e,this):f("div",{dangerouslySetInnerHTML:this.outputHTML(this.getBlockTpl(e))})}},{key:"saveBlockProperties",value:function(e){for(var t in this.props=e,this.attrs=this.props.attributes,this.fields)if(this.fields.hasOwnProperty(t)){var o=this.fields[t];!this.attrs[o.id]&&isNaN(this.attrs[o.id])?this.attrs[o.id]=o.default:"image"===o.type&&this.attrs[o.id].indexOf("featured_image")>-1?this.attrs[o.id]=caxton.content_vars[this.attrs[o.id]]:this.attrs[o.id]=this.attrs[o.id]}}},{key:"registerBlock",value:function(){var e,a=this,i=this.block,t=p.extend({},i);if(i.icon.includes("<svg")){var o=jQuery(i.icon),n={};p.each(o[0].attributes,function(){this.specified&&(e=this.name.replace(/[-:]([a-z])/g,function(e){return e[1].toUpperCase()}),n[e]=this.value)}),n.height=20,n.width=20,i.icon=u(o.html(),n,"svg")}delete t.fields,delete t.tpl,delete t.id,t.icon=i.icon;var r=function(e){var t=[];if(a.saveBlockProperties(e),"function"==typeof a.block.beforeEdit){var o=a.block.beforeEdit(e,a);o&&t.push(o)}e.isSelected&&(a.focussedProps=e,t.push(a.inspectorFields()),t.push(a.toolbarElements()));var n=a.edit(e);if(a.block.resizable&&(n=a.resizableElement(a.block.resizable,n)),t.push(n),"function"==typeof a.block.afterEdit){var i=a.block.afterEdit(e,a);i&&t.push(i)}return f("div",{key:"block-content"},t)};if(t.edit=r,t.getEditWrapperProps=function(e){var t={},o=e.Layout,n=e.BlockAlignment;if(n=n||e["Block Alignment"],o&&(t["caxton-layout"]=o),n){t["data-align"]={" fl":"left"," rl":"right"}[n]}return"function"==typeof i.registerBlockProps&&(t=jQuery.extend(i.registerBlockProps(e,a),t)),"function"==typeof a.block.wrapperProps&&(t=a.block.wrapperProps(t,e,this)),t},t.save=function(e){return a.saveBlockProperties(e),a.save(e)},"function"==typeof i.apiCallback){"function"!=typeof i.apiUrl&&(i.apiUrl=function(){return{apiData:i.apiUrl}}),a.block.edit=i.apiCallback;var l=function(e){function o(e){var t;return y(this,o),(t=d(this,v(o).apply(this,arguments))).state={dataProps:s({},e),block:i,editCallback:r},t}return g(o,React.Component),b(o,[{key:"fetchUrls",value:function(){var o=this.state,n=this.state.block.apiUrl(o.dataProps),i=this,e=function(t){n.hasOwnProperty(t)&&(o.dataProps[t]&&n[t]===o.dataProps[t].path||(o.dataProps[t]={},wp.apiFetch({path:n[t]}).then(function(e){i&&o.dataProps[t].data!==e&&(o.dataProps[t].data=e,o.dataProps[t].path=n[t],i.setState(o))})))};for(var t in n)e(t)}},{key:"render",value:function(){return s(this.state.dataProps,this.props),this.fetchUrls(),this.state.editCallback(this.state.dataProps)}}]),o}();t.edit=l,t.save=function(){return null}}i.id.includes("/")||(i.id="caxton/".concat(i.id)),c(i.id,t)}}]),o}();o.prototype.orderedselectFieldEl=o.prototype.orderedSelectFieldEl,window.CaxtonBlock=function(e){return new o(e)},window.caxtonRegisterFieldType=function(e,t){},window.Caxton={el2html:function(e){var t="";if(e){e.length||(e=[e]);for(var o=0;o<e.length;o++){var n=e[o];switch(k(n)){case"object":t+=wp.element.renderToString(n);break;default:t+=n}}}return t},html2el:u,copyObj:s,tplProc:function(e,t){var o;for(o in t)t.hasOwnProperty(o)&&(e=e.split("{{".concat(o,"}}")).join(t[o]));for(o in t)t.hasOwnProperty(o)&&(e=e.split("{{".concat(o,"}}")).join(t[o]));return e},iconSvg:l}}r(jQuery,wp.blocks,wp.element.createElement,window.wp.i18n,wp.components),jQuery(function(a){setTimeout(function(){if("string"==typeof ajaxurl){for(var e,t,o=wp.data.select("core/blocks").getBlockTypes(),n={},i=0;i<o.length;i++)t="object"===k(t=(e=o[i]).icon.src)?Caxton.el2html(t):'<span class="dashicons dashicons-'.concat(t,'"></span>'),n[e.name]={title:e.title,icon:t,category:e.category};a.post(ajaxurl,{action:"caxton_save_blocks",blocks:JSON.stringify(n)})}},2500)}),setTimeout(function(){CaxtonUtils.asset("icons-data.js"),CaxtonUtils.asset("icons-svg.js")},2500)},{}]},{},[1]);