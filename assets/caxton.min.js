(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _multiSelectComponent=_interopRequireDefault(require("./es6/multiSelectComponent.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function initCaxton(e,t,n,o,i){window.caxtonWPEditor=wp.blockEditor?wp.blockEditor:wp.editor;var r=caxtonWPEditor,a=o.__,l=t.registerBlockType,s=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},c=function(t,o,i){t?t.__html&&(t=t.__html):t="",o||(o={}),i||(i="div");var r=e.extend({dangerouslySetInnerHTML:{__html:t}},o);return n(i,r)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=caxtonFAIconsSvg[e];if(n||(n=caxtonFAIconsSvg[e+"-solid"])||(n=caxtonFAIconsSvg[e+"-brand"])||(n=caxtonFAIconsSvg[e+"-regular"]),t){var o="object"===_typeof(t)?t:{};return c(n,o)}return n},p=function(){function t(n){_classCallCheck(this,t);var o=this;this.setProps(),n.id||console.error("Parameter `id` is required for CaxtonBlock"),this.block=e.extend({title:n.id,icon:"star-filled",category:"layout",fields:{},attributes:{}},n),o.tpl=n.tpl,n.toolbars?n.fields=jQuery.extend(n.fields,n.toolbars):n.toolbars={},n.resizable&&(n.resizable.height&&(this.block.attributes[n.resizable.height]={type:"string"}),n.resizable.width&&(this.block.attributes[n.resizable.width]={type:"string"})),o.fields=o.processFields(n.fields),o.sections=n.sections?n.sections:{},o.sectionsFields=o.processSections(o.fields),o.toolbars=o.processFields(n.toolbars),o.registerBlock()}return _createClass(t,[{key:"setProps",value:function(){this.keySuffix=0}}]),_createClass(t,[{key:"preprocessField_overlay",value:function(e,t){var n=s({color:"",color2:"",gradient:"linear-gradient( ",opacity:"1"},t[e].defaults||{});t[e]=Object.assign({section:"Overlay",tpl:'<div class="absolute absolute--fill" style="background-color:{{Background color}};{{Gradient type}}{{Background colors opacity}}"></div>'},t[e]);var o=t[e].section;Object.assign(t,{"Background color":{type:"color",section:o,default:n.color},"Gradient color":{type:"color",section:o,tpl:", %s",default:n.color2},"Gradient type":{type:"select",options:[{value:"linear-gradient( ",label:"Linear vertical"},{value:"linear-gradient( 90deg, ",label:"Linear horizontal"},{value:"linear-gradient( 45deg, ",label:"Linear 45 deg"},{value:"linear-gradient( -45deg, ",label:"Linear 45 deg anticlockwise"},{value:"radial-gradient( ",label:"Radial gradient"}],section:o,tpl:"background-image:%s{{Background color}}{{Gradient color}});",default:n.gradient},"Background colors opacity":{type:"range",min:0,max:1,step:.05,help:"Reduce opacity to have transparent colors over image",section:o,tpl:"opacity:%s;",default:n.opacity}})}},{key:"preprocessField_background",value:function(e,t){var n=s({image:"",image_position:"",parallax:""},t[e].defaults||{}),o="background-color:{{Background color}};{{Gradient type}}",i='<div class="absolute absolute--fill cover bg-center" style="'+o+'{{Background image}}{{Background image position}}{{Background parallax}}"></div><div class="absolute absolute--fill" style="'+o+'{{Background colors opacity}}"></div>';t[e]=Object.assign({section:"Background",tpl:i},t[e]);var r=t[e].section;Object.assign(t,{"Background image":{type:"image",section:r,tpl:"background-image:url(%s);",default:n.image},"Background image position":{type:"position",section:r,tpl:"background-position:%s;",default:n.image_position},"Background parallax":{type:"toggle",value:"background-attachment:fixed;",section:r,default:n.parallax}}),this.preprocessField_overlay(e,t),t[e].tpl=i}},{key:"preprocessFields",value:function(e){for(var t in e)e.hasOwnProperty(t)&&e[t].type&&"function"==typeof this["preprocessField_"+e[t].type]&&this["preprocessField_"+e[t].type](t,e);return e}},{key:"processFields",value:function(e){var t=[];for(var n in e=this.preprocessFields(e))if(e.hasOwnProperty(n)){var o=e[n],i={};"object"===_typeof(o)?i=o:i.type=o,i.id=n,i.label=i.label||n,i.section=i.section||"_caxtonDefaultSection_","checkbox"!==i.type&&"toggle"!==i.type||(i.value=i.value||"1"),!i.default&&isNaN(i.default)?i.default="":i.default=""+i.default,i.attr?this.block.attributes[n]=i.attr:this.block.attributes[n]={type:this.fieldAttrType(i)},t.push(i)}return t}},{key:"fieldAttrType",value:function(e){var t=e.type,n={number:["number","string"],range:["number","string"]};return n[t]?n[t]:"string"}},{key:"processSections",value:function(e){for(var t={},n=0;n<e.length;n++){var o=e[n].section;o&&(t[o]||(t[o]=[]),t[o].push(e[n]))}return t}},{key:"fieldProps",value:function(t,n){var o=t.id,i=this,r=e.extend({},t);return r.key="".concat(r.type,"-").concat(n),r.onChange||(r.value=i.attrs[o],r.onChange=function(e,n){var r={};r[o]=e+"","checkbox"!==t.type&&"toggle"!==t.type||(r[o]=e?t.value+"":""),i.focussedProps.setAttributes(r),"function"==typeof t.onChange&&t.onChange(e,i,n)},delete r.id,delete r.type),r}},{key:"editableFieldEl",value:function(e,t){return null}},{key:"overlayFieldEl",value:function(e,t){return null}},{key:"backgroundFieldEl",value:function(e,t){return null}},{key:"imageFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.className||(o.className=""),o.value&&o.value.indexOf("featured_image")>-1&&o.onChange(caxton.content_vars[o.value]),o.className+=" caxton-file-picker",n(i.BaseControl,o,n(r.MediaUpload,{key:"imagePicker",onSelect:function(e){o.onChange(e.url,e)},allowedTypes:["image"],value:o.value,label:o.label,render:function(e){var t=e.open;return o.value?[n("img",{src:o.value,className:"mb2 db",key:"image"}),n("button",{className:"components-button is-secondary is-small",onClick:t,key:"btn"},a("Change image")),n("button",{className:"components-button is-tertiary is-small fr",onClick:function(){o.onChange("",{})},key:"btn"},a("Remove image"))]:n("span",{className:"ml3 v-mid dib"},n(i.Button,{className:"is-primary is-small",onClick:t,key:"btn"},"Select image"))}}))}},{key:"fileFieldEl",value:function(e,t){e.item=e.item||"file";var o=this.fieldProps(e,t);return o.className||(o.className=""),o.item||(o.item="image"),o.className+=" caxton-file-picker",n(i.BaseControl,o,n(r.MediaUpload,{key:"filePicker",onSelect:function(e){o.onChange(e.url,e)},allowedTypes:e.allowedTypes,value:o.value,label:o.label,render:function(e){var t=e.open;if(o.value){var r=o.value.split("/");return[n("span",{className:"b--dashed bw1 db pa2 tc mb2",key:"file"},r[r.length-1]),n("button",{className:"components-button is-secondary is-small",onClick:t,key:"btn"},a("Change "+o.item)),n("button",{className:"components-button is-tertiary is-small fr",onClick:function(){o.onChange("",{})},key:"btn"},a("Remove "+o.item))]}return n("span",{className:"ml3 v-mid dib"},n(i.Button,{className:"is-primary is-small",onClick:t},"Select "+o.item))}}))}},{key:"colorFieldEl",value:function(e,t){var o=[],i=this.fieldProps(e,t);return i.title=i.label,void 0===i.initialOpen&&(i.initialOpen=!i.value),e.help&&o.push(e.help),i.colorSettings=[{label:i.label,value:i.value,onChange:i.onChange}],n(caxtonWPEditor.PanelColorSettings,i,o)}},{key:"checkboxFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.checked=!!this.attrs[e.id],n(i.CheckboxControl,o)}},{key:"radioFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.selected=o.value,n(i.RadioControl,o)}},{key:"rangeFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.value=parseFloat(o.value),n(i.RangeControl,o)}},{key:"selectFieldEl",value:function(e,t){return n(i.SelectControl,this.fieldProps(e,t))}},{key:"orderedSelectFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return n(i.BaseControl,o,n(_multiSelectComponent.default,o))}},{key:"fontFieldEl",value:function(t,o){t.tpl||(t.tpl="font-family: %s;");var r=this.fieldProps(t,o),a=r.onChange;return r.onChange=function(t){if(!t.includes(",")){var n=e("<link rel='stylesheet' class='caxton-google-font'>");n.attr("href","https://fonts.googleapis.com/css?family=".concat(t)),e("body").append(n)}a(t)},r.options=caxton.fonts,n(i.SelectControl,r)}},{key:"numberFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.type="number",n(i.TextControl,o)}},{key:"textFieldEl",value:function(e,t){return n(i.TextControl,this.fieldProps(e,t))}},{key:"customFieldEl",value:function(e,t){return e.render(this.fieldProps(e),this)}},{key:"textareaFieldEl",value:function(e,t){return n(i.TextareaControl,this.fieldProps(e,t))}},{key:"dateTimeFieldEl",value:function(e,t){return datetimeFieldEl(e,t)}},{key:"datetimeFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.currentDate=o.value,n(i.PanelBody,{title:o.label},n(i.DateTimePicker,o))}},{key:"timeFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.type="time",n(i.TextControl,o)}},{key:"toggleFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.checked=!!this.attrs[e.id],n(i.ToggleControl,o)}},{key:"iconFieldEl",value:function(t,o){var r=this.fieldProps(t,o),l=[];r.title=r.label,r.className="caxton-icon-picker-panel";for(var s=0;s<100;s++){var c=caxtonFAIconsData[s];l.push(u(c.n,{key:s,className:"icon-choice","data-icon":c.n},"i"))}return l.push(n("p",{key:"helptext"},"Search icons for more from all Font Awesome icons")),n(i.PanelBody,r,n("div",{className:"caxton-icon-picker",onClick:function(t){var n=t.target,o=e(n).closest(".icon-choice");o.length&&r.onChange(o.html())}},n("input",{type:"text",placeholder:a("Search icons","caxton"),onKeyUp:function(t){var n,o=t.target,i=o.value,r=0;i=i.toLowerCase(),(n=e(o).siblings(".caxton-matching-icons")).html("");for(var a=0;r<50&&a<caxtonFAIconsData.length;a++){var l=caxtonFAIconsData[a];l.n.includes(i)?(r++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice">')+u(l.n,!1)+"</i>")):r<34&&l.s.includes(i)&&(r++,n.append('<i data-icon="'.concat(l.n,'" class="icon-choice order-2">')+u(l.n,!1)+"</i>"))}}}),n("span",{className:"dashicons dashicons-search",title:a("Search","caxton")}),n("span",{className:"dashicons dashicons-no",title:a("Remove icon","caxton"),style:{cursor:"pointer",display:r.value?"block":"none"},onClick:function(){r.onChange("")}}),n("div",{className:"caxton-matching-icons",onClick:function(e){var t=e.target;"I"===t.tagName&&r.onChange(" ".concat(t.className.replace(" o-70","")))}},l)))}},{key:"positionFieldEl",value:function(e,t){var o=this.fieldProps(e,t);return o.selected=o.value,o.options=[{value:"center top",label:"Top"},{value:"",label:"Center"},{value:"center bottom",label:"Bottom"}],n(i.RadioControl,o)}},{key:"AlignmentToolbarInit",value:function(t,o){var r=this.fieldProps(t,o),l=e.extend({left:"tl",right:"tr",center:"tc",justify:"tj"},r.values||{});return r.controls=[{icon:"editor-alignleft",title:a("Align left"),isActive:r.value===l.left,onClick:function(){r.onChange(l.left)}},{icon:"editor-aligncenter",title:a("Align center"),isActive:r.value===l.center,onClick:function(){r.onChange(l.center)}},{icon:"editor-alignright",title:a("Align right"),isActive:r.value===l.right,onClick:function(){r.onChange(l.right)}},{icon:"editor-justify",title:a("Align justify"),isActive:r.value===l.justify,onClick:function(){r.onChange(l.justify)}}],r.wideControlsEnabled=!0,n(i.Toolbar,r)}},{key:"BlockWidthToolbarInit",value:function(e,t){var o=this.fieldProps(e,t);return o.controls=[{icon:"align-center",title:a("Default"),isActive:!o.value,onClick:function(){o.onChange("")}},{icon:"align-wide",title:a("Wide width"),isActive:" vw-100-bg"===o.value,onClick:function(){o.onChange(" vw-100-bg")}},{icon:"align-full-width",title:a("Full width"),isActive:" vw-100"===o.value,onClick:function(){o.onChange(" vw-100")}}],o.wideControlsEnabled=!0,n(i.Toolbar,o)}},{key:"BlockAlignToolbarInit",value:function(e,t){var o=this.fieldProps(e,t);return o.controls=[{icon:"align-left",title:a("Align left"),isActive:" fl"===o.value,onClick:function(){o.onChange(" fl")}},{icon:"align-center",title:a("Align center"),isActive:!o.value,onClick:function(){o.onChange("")}},{icon:"align-right",title:a("Align right"),isActive:" fr"===o.value,onClick:function(){o.onChange(" fr")}}],o.wideControlsEnabled=!0,n(i.Toolbar,o)}},{key:"renderPanel",value:function(t){this.fields;var o,r={};return this.sections[t]&&(r=this.sections[t]),(r=e.extend(r,{title:t,className:"",key:"CaxtonPanel".concat(t),initialOpen:!1})).className+="caxton-section caxton-section-".concat(t.toLowerCase().replace(/[^0-z]/g,"-")),o=this.renderFields(this.sectionsFields[t],t),"_caxtonDefaultSection_"===t?n("div",{className:"components-panel__body is-opened"},o):n(i.PanelBody,r,o)}},{key:"fieldEl",value:function(e,t,n){return void 0===n&&(n=this.keySuffix++),t||(t=e.type+"FieldEl"),this[t](e,n)}},{key:"renderFields",value:function(e,t,n){var o=[],i=[];n||(n="FieldEl");for(var r=0;r<e.length;r++){var a,l=e[r];n.includes("Toolbar")&&(l.type=l.type.replace("Toolbar","")),"function"==typeof l.render&&(l.type="custom"),"function"==typeof this[a=l.type+n]?l.hide||(t?l.section==t&&o.push(this.fieldEl(l,a,r)):i.includes(l.section)||(i.push(l.section),o.push(this.renderPanel(l.section)))):l.type.includes("Toolbar")||console.error("".concat(n.replace("Init","")," ").concat(l.id," of type ").concat(l.type," and callback ").concat(a," not supported."))}return o}},{key:"resizableElement",value:function(e,t,o){var r,a=(o=o||this.props).attributes,l=o.setAttributes,s=o.isSelected,c=e.height,u=e.width,p=_slicedToArray(wp.element.useState(!1),2),d=p[0],f=p[1];if(c||u){r=(e=jQuery.extend({enable:[],onResizeStop:function(){},onResize:function(){},onResizeStart:function(){}},e)).enable.toString().toLowerCase();var y={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},h={key:"caxton-resizable",className:{"caxton-resizable":!0,"is-selected":s,"is-resizing":d},size:{},onResizeStop:function(t,n,i,r){e.onResizeStop(t,n,i,r,o),f(!1)},onResize:function(t,n,i,r){var a=e.onResize(t,n,i,r,o);a=a||{},c&&!a[c]&&(a[c]=e.keepUnits?i.style.height+"":i.clientHeight+""),u&&!a[u]&&(a[u]=e.keepUnits?i.style.width+"":i.clientWidth+""),l(a)},onResizeStart:function(t,n,i,r){e.onResizeStart(t,n,i,r,o),f(!0)}};return e.size&&(h.size=e.size),c&&(a[c]&&(h.size.height=a[c]),h.minHeight=e.minHeight||50,r.indexOf("top")>-1||r.indexOf("bottom")>-1||e.enable.push("bottom")),u&&(a[u]&&(h.size.width=a[u]),h.minWidth=e.minWidth||50,r.indexOf("left")>-1||r.indexOf("right")>-1||e.enable.push("right")),e.enable.forEach(function(e){y.hasOwnProperty(e)&&(y[e]=!0)}),h.enable=y,h.showHandle=s,n(i.ResizableBox,h,n("div",{className:"caxton-resizable-contents"},t))}return t}},{key:"toolbarElements",value:function(){var e=this.renderFields(this.toolbars,!1,"ToolbarInit");if(e.length)return n(r.BlockControls,{key:"toolbars"},e)}},{key:"inspectorFields",value:function(){var e=this.fields,t=[];if((t=t.concat(this.renderFields(e)))&&t.length)return n.apply(void 0,[r.InspectorControls,{key:"inspector"}].concat(_toConsumableArray(t)))}},{key:"populateField_editable",value:function(e,t,n){var o=a("Click to Edit");return t.tag||(t.tag="span"),n?(e===t.default&&(e="<".concat(t.tag,' class="default">').concat(e,"</").concat(t.tag,">")),e="<".concat(t.tag,' contentEditable="true" title="').concat(o,'" data-caxtonEditableProp="').concat(t.id,'">').concat(e,"</").concat(t.tag,">")):e&&(e="<".concat(t.tag,">").concat(e,"</").concat(t.tag,">")),e}},{key:"populateField_overlay",value:function(e,t){return"1"}},{key:"populateField_background",value:function(e,t){return"1"}},{key:"populateFields",value:function(e,t){if(!e)return"";for(var n in this.fields)if(this.fields.hasOwnProperty(n)){var o,i=this.fields[n],r=o=this.attrs[i.id];"function"==typeof this["populateField_"+i.type]&&(r=this["populateField_"+i.type](r,i,t)),(r||"number"==typeof r)&&i.tpl&&(r=this.callbackValue(i.tpl,r).replace(/%s/g,r)),e=(e=e.split("{{_".concat(i.id,"}}")).join(o)).split("{{".concat(i.id,"}}")).join(r)}return e}},{key:"parseTpl",value:function(e,t){return e=this.populateFields(e,t),this.populateFields(e,t)}},{key:"outputHTML",value:function(e,t){return{__html:this.parseTpl(e,t)}}},{key:"callbackValue",value:function(e,t){return"function"==typeof e?e(t,this):e}},{key:"editableTpl",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this;return o=this.callbackValue(o,t),i=s({key:"block",dangerouslySetInnerHTML:r.outputHTML(o,"edit"),onClick:function(e){e.preventDefault()},onKeyDown:function(t){var n=t.target,o=e(n).find(".default");o.length&&o.remove()},onBlur:function(t){var n=t.target,o=e(n),i={};i[o.attr("data-caxtonEditableProp")]=o.html(),r.focussedProps.setAttributes(i)}},i),n("div",i)}},{key:"edit",value:function(e){if(this.block)return"function"==typeof this.block.edit?this.block.edit(e,this):this.editableTpl(e,this.tpl)}},{key:"save",value:function(e){this.block.id;if(this.block)return"function"==typeof this.block.save?this.block.save(e,this):n("div",{dangerouslySetInnerHTML:this.outputHTML(this.callbackValue(this.tpl,e))})}},{key:"saveBlockProperties",value:function(e){this.props=e,this.saveBlockAttributes(this.props.attributes)}},{key:"saveBlockAttributes",value:function(e){for(var t in this.attrs=e,this.fields)if(this.fields.hasOwnProperty(t)){var n=this.fields[t];!this.attrs[n.id]&&isNaN(this.attrs[n.id])?this.attrs[n.id]=n.default:"image"===n.type&&this.attrs[n.id].indexOf("featured_image")>-1?this.attrs[n.id]=caxton.content_vars[this.attrs[n.id]]:this.attrs[n.id]=this.attrs[n.id]}}},{key:"registerBlock",value:function(){var t,o=this,i=this.block,r=e.extend({},i);if(i.icon.includes("<svg")){var a=jQuery(i.icon),u={};e.each(a[0].attributes,function(){this.specified&&(t=this.name.replace(/[-:]([a-z])/g,function(e){return e[1].toUpperCase()}),u[t]=this.value)}),u.height=20,u.width=20,i.icon=c(a.html(),u,"svg")}delete r.fields,delete r.tpl,delete r.id,r.icon=i.icon;var p=function(e){var t=[];if(o.saveBlockProperties(e),"function"==typeof o.block.beforeEdit){var i=o.block.beforeEdit(e,o);i&&t.push(i)}e.isSelected&&(o.focussedProps=e,t.push(o.inspectorFields()),t.push(o.toolbarElements()));var r=o.edit(e);if(o.block.resizable&&(r=o.resizableElement(o.block.resizable,r)),t.push(r),"function"==typeof o.block.afterEdit){var a=o.block.afterEdit(e,o);a&&t.push(a)}return n(wp.element.Fragment,{key:"block-content"},t)};if(r.edit=p,r.getEditWrapperProps=function(e){o.saveBlockAttributes(e);var t={},n=e.Layout,r=e.BlockAlignment;if(r=r||e["Block Alignment"],n&&(t["caxton-layout"]=n),r){t["data-align"]={" fl":"left"," rl":"right"}[r]}return"function"==typeof i.registerBlockProps&&(t=jQuery.extend(i.registerBlockProps(e,o),t)),"function"==typeof o.block.wrapperProps&&(t=o.block.wrapperProps(t,e,o)),t},r.save=function(e){return o.saveBlockProperties(e),o.save(e)},void 0!==i.apiUrl){"function"!=typeof i.apiUrl&&(i.apiUrl=function(){return{apiData:i.apiUrl}}),"function"==typeof i.apiCallback&&(o.block.edit=i.apiCallback);r.edit=function(e){var t=_slicedToArray(wp.element.useState("{}"),2),n=t[0],o=t[1],r=JSON.parse(n),a=i.apiUrl(e),l=function(e){a.hasOwnProperty(e)&&(r[e]&&a[e]===r[e].path||(r[e]={},wp.apiFetch({path:a[e]}).then(function(t){r[e].data!==t&&(r[e].data=t,r[e].path=a[e],o(JSON.stringify(r)))})))};for(var c in a)l(c);return p(s(_objectSpread({},e),r))},"function"!=typeof this.block.save&&(r.save=function(){return null})}-1===i.id.indexOf("/")&&(i.id="caxton/".concat(i.id)),l(i.id,r)}}]),t}();p.prototype.orderedselectFieldEl=p.prototype.orderedSelectFieldEl,window.CaxtonBlock=function(e){return new p(e)},window.CaxtonContentBlock=function(e){for(var t=Caxton.copyObj({tag:"div",props:{},tplProps:{},innerProps:{classname:"caxton-content-wrapper"},prefix:"",prefixProps:{},suffix:"",suffixProps:{},template:[]},e),o=["tag","props","innerProps","template","prefix","prefixProps","tplProps","suffix","suffixProps"],i=0;i<o.length;i++){delete e[o[i]]}return e.edit=function(e,o){var i=function(t){return o.callbackValue(t,e)};return n(t.tag,i(t.props),t.prefix&&o.editableTpl(e,i(t.prefix),i(t.prefixProps)),t.tpl&&o.editableTpl(e,i(t.tpl),i(t.tplProps)),n("div",i(t.innerProps),n(r.InnerBlocks,{template:t.template})),t.suffix&&o.editableTpl(e,i(t.suffix),i(t.suffixProps)))},e.save=function(e,o){var i=function(t){return o.callbackValue(t,e)};return n(t.tag,o.callbackValue(t.props),t.prefix&&c(o.outputHTML(i(t.prefix)),i(t.prefixProps)),t.tpl&&c(o.outputHTML(i(t.tpl)),i(t.tplProps)),n("div",i(t.innerProps),n(r.InnerBlocks.Content)),t.suffix&&c(o.outputHTML(i(t.suffix)),i(t.suffixProps)))},new p(e)},window.Caxton={el:n,el2html:function(e){var t="";if(e){e.length||(e=[e]);for(var n=0;n<e.length;n++){var o=e[n];switch(_typeof(o)){case"object":t+=wp.element.renderToString(o);break;default:t+=o}}}return t},html2el:c,copyObj:s,styleObject:function(e){for(var t={},n=e.split(";"),o=0;o<n.length;o++){var i=n[o].split(/:(.+)/);t[i[0]]=i[1]}return t},tplProc:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));for(n in t)t.hasOwnProperty(n)&&(e=e.split("{{".concat(n,"}}")).join(t[n]));return e},iconSvg:u}}initCaxton(jQuery,wp.blocks,wp.element.createElement,window.wp.i18n,wp.components),jQuery(function(e){setTimeout(function(){if("string"==typeof ajaxurl){for(var t,n,o=wp.data.select("core/blocks").getBlockTypes(),i={},r=0;r<o.length;r++)n="object"===_typeof(n=(t=o[r]).icon.src)?Caxton.el2html(n):'<span class="dashicons dashicons-'.concat(n,'"></span>'),i[t.name]={title:t.title,icon:n,category:t.category};e.post(ajaxurl,{action:"caxton_save_blocks",blocks:JSON.stringify(i)})}},2500)}),setTimeout(function(){CaxtonUtils.asset("icons-data.js"),CaxtonUtils.asset("icons-svg.js")},2500);

},{"./es6/multiSelectComponent.es6":2}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=MultiSelectComponent;var _reactSortableList=_interopRequireDefault(require("./react-sortable-list.es6"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,o=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw n}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function optionEl(e){var t=window.Caxton.el;return t("div",{className:"caxton-orderedselect-option","data-val":e.value,key:"option-".concat(e.value)},e.image?t("img",{src:e.image}):null,e.label)}function MultiSelectComponent(e){var t=window.Caxton.el;$=window.jQuery;for(var r,a,o=_slicedToArray(wp.element.useState(""),2),n=o[0],l=o[1],i=e.delimiter?e.delimiter:",",s=void 0===e.multiple||e.multiple,c={},u={},d=[],p=e.value?e.value.split(i):[],y=0;y<e.options.length;y++)if(a=optionEl(r=e.options[y]),"number"==typeof r.value&&(r.value=r.value.toString()),-1!==p.indexOf(r.value))c[r.value]=r,u[r.value]=a;else{if(d.length>99)continue;(!n||r.label.toLowerCase().indexOf(n.toLowerCase())>-1)&&d.push(a)}return d.length<2&&d.push(t("span",{className:"caxton-placeholder o70",key:"placeholder"},"No items found".concat(n&&" for "+n,"..."))),d.splice(0,0,t("input",{className:"caxton-orderedselect-search",placeholder:"Search...",value:n,onChange:function(e){var t=e.target;return l(t.value)},key:"search"})),t("div",{className:"caxton-orderedselect-wrap caxton-orderedselect-"+(s?"multiple":"single"),key:"orderedselect-wrap"},t("div",{className:"caxton-orderedselect-selected",key:"selected-options",onClick:function(t){var r,a=t.target,o=$(a);s&&o.hasClass("caxton-orderedselect-option")?(r=o.attr("data-val"),p.splice(p.indexOf(r),1),e.onChange(p.join(i))):o.closest(".caxton-orderedselect-wrap").toggleClass("caxton-orderedselect-open")}},t(_reactSortableList.default,{data:p,renderItem:function(e){return u[e]},onChange:function(t){e.onChange(t.join(i))}}),!p.length&&t("span",{className:"caxton-placeholder o70",key:"placeholder"},"Please choose..."),t("i",{className:"dashicons dashicons-arrow-down",key:"down-arrow-icon"})),t("div",{className:"caxton-orderedselect-available",key:"available-options",onClick:function(t){var r,a=t.target,o=$(a);o.hasClass("caxton-orderedselect-option")&&(r=o.attr("data-val"),s?p.push(r):(p=[r],o.closest(".caxton-orderedselect-wrap").toggleClass("caxton-orderedselect-open")),e.onChange(p.join(i)))}},d))}

},{"./react-sortable-list.es6":3}],3:[function(require,module,exports){
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var SortableItems=function(t){_inherits(r,wp.element.Component);var e=_createSuper(r);function r(t){var o;_classCallCheck(this,r),o=e.call(this,t);var n=document.createElement("div");return n.className="placeholder",o.state={data:_toConsumableArray(t.data),placeholder:n},o.dragEnd=o.dragEnd.bind(_assertThisInitialized(o)),o.dragStart=o.dragStart.bind(_assertThisInitialized(o)),o.dragOver=o.dragOver.bind(_assertThisInitialized(o)),o}return _createClass(r,[{key:"componentWillMount",value:function(){this.setState({data:_toConsumableArray(this.props.data)})}},{key:"componentDidUpdate",value:function(t){this.props.data.length===this.state.data.length&&JSON.stringify(this.props.data)===JSON.stringify(t.data)||this.setState({data:_toConsumableArray(this.props.data)})}},{key:"sortData",value:function(t,e){var r=_toConsumableArray(this.state.data);r.splice(e,0,r.splice(t,1)[0]),(this.props.onChange||function(t){return null})(r),this.setState({data:r})}},{key:"dragStart",value:function(t){this.dragged=t.currentTarget,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",t.currentTarget),this.state.placeholder.style.height=this.dragged.offsetHeight+"px"}},{key:"dragEnd",value:function(t){this.dragged.style.display="block",this.dragged.parentNode.removeChild(this.state.placeholder);var e=Number(this.dragged.dataset.ind),r=Number(this.over.dataset.ind);e<r&&r--,"after"==this.nodePlacement&&r++,this.sortData(e,r)}},{key:"dragOver",value:function(t){if(t.preventDefault(),this.dragged.style.display="none","placeholder"!=t.target.className){for(this.over=t.target;!this.over.classList.contains("sortable-items--item");){if(this.over.classList.contains("sortable-items--wrap"))return;this.over=this.over.parentNode}var e=this.dragged.offsetTop-this.over.offsetTop,r=this.over.offsetHeight/2,o=this.over.parentNode;e>r?(this.nodePlacement="after",o.insertBefore(this.state.placeholder,this.over.nextElementSibling)):e<r&&(this.nodePlacement="before",o.insertBefore(this.state.placeholder,this.over))}}},{key:"renderItem",value:function(t,e){var r=window.Caxton.el,o=this.props.renderItem;o||(o=function(t){return t});var n=_objectSpread({key:e,draggable:"true",onDragEnd:this.dragEnd,onDragStart:this.dragStart,className:"","data-ind":e},this.props.itemProps||{});return n.className+=" sortable-items--item",r("div",n,o(t))}},{key:"render",value:function(){var t=this,e=window.Caxton.el,r=this.state.data.map(function(e,r){return t.renderItem(e,r)}),o=_objectSpread({onDragOver:this.dragOver,className:""},this.props.wrapProps||{});return o.className+=" sortable-items--wrap",e("div",o,r)}}]),r}();exports.default=SortableItems;

},{}]},{},[1]);
